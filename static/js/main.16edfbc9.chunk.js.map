{"version":3,"sources":["assets/img/user.png","auth/profile/Profile.module.scss","packs/pack/Pack.module.scss","cards/card/Card.module.scss","cards/Cards.module.scss","utils/formFields/formFields.tsx","api/authApi.ts","reducers/authReducers/loginReducer.ts","utils/formValidation/formValidation.ts","utils/loading/authLoading/AuthLoading.tsx","auth/login/Login.tsx","reducers/authReducers/registrationReducer.ts","auth/registration/Registration.tsx","auth/profile/Profile.tsx","reducers/authReducers/restorePasswordReducer.ts","auth/restorePassword/RestorePassword.tsx","reducers/authReducers/newPasswordReducer.ts","auth/newPassword/NewPassword.tsx","app/appReducer.ts","utils/loading/appInitLoading/AppInitLoading.tsx","header/Header.tsx","api/packsApi.ts","reducers/packsReducer/packsReducer.ts","utils/sorting/Sorting.tsx","packs/pack/Pack.tsx","packs/addPack/AddPack.tsx","packs/editPack/EditPack.tsx","utils/search/Search.tsx","utils/pagination/Pagination.tsx","utils/loading/packsLoading/PacksLoading.tsx","utils/rangeSlider/RangeSlider.tsx","packs/deletePack/DeletePack.tsx","packs/Packs.tsx","api/cardsApi.ts","reducers/cardsReducer/cardsReducer.ts","cards/card/Card.tsx","cards/addCard/AddCard.tsx","cards/editCard/EditCard.tsx","cards/deleteCard/DeleteCard.tsx","cards/Cards.tsx","notFound/NotFound.tsx","api/learnApi.ts","reducers/learnReducer/learnReducer.ts","learn/Learn.tsx","app/App.tsx","store/store.ts","index.tsx","header/Header.module.scss","packs/Packs.module.scss","cards/editCard/EditCard.module.scss","utils/rangeSlider/RangeSlider.module.scss","cards/addCard/AddCard.module.scss","packs/addPack/AddPack.module.scss","packs/editPack/EditPack.module.scss","notFound/NotFound.module.scss","auth/authStyles/authStyles.module.css","utils/formFields/formField.module.scss","auth/restorePassword/RestorePassword.module.css","utils/sorting/Sorting.module.scss"],"names":["module","exports","FormField","Element","input","meta","props","error","touched","className","s","formFieldError","Input","Textarea","instance","axios","create","baseURL","withCredentials","authApi","email","password","post","then","res","console","log","data","rememberMe","delete","from","message","resetPasswordToken","authMeAC","isAuth","userProfile","type","errorAC","loadingAC","isLoading","authInitState","_id","name","avatar","publicCardPacksCount","created","updated","isAdmin","verified","token","tokenDeathTime","authMeTC","dispatch","a","response","fieldRequired","value","minLength","length","AuthLoading","Login","useDispatch","authState","useSelector","state","authReducer","useEffect","localStorage","getItem","to","authFormBlock","authFormWrap","disabled","authFormTitle","ReduxLoginForm","onSubmit","loginData","setTimeout","authFormError","reduxForm","form","handleSubmit","authForm","authForm__formGroup","Field","component","placeholder","id","validate","authForm__info","authForm__checkboxGroup","htmlFor","initialState","registrationSuccess","Registration","registrationState","store","registrationReducer","ReduxRegistrationForm","registrationData","repeatPassword","minLengthValidation","Profile","profileBlock","profileContent","profileContent__left","profileContent__ava","src","alt","dummy_img","profileContent__right","profileContent__userData","restorePasswordInitState","restored","RestorePassword","useState","showPopUp","setShowPopUp","ReduxRestorePasswordForm","restoreData","sr","restorePasswordPopUp","restorePasswordPopUp__content","restorePasswordPopUp__info","SetNewPasswordInitState","passwordIsSet","ReduxSetNewPasswordForm","NewPasswordWithRouter","withRouter","setNewPasswordState","newPassword","newData","match","params","appInitAC","isInit","appInitialState","AppInitLoading","Header","currentUrl","history","location","pathname","header","headerNav","headerNav__link","active","header__logout","onClick","packsApi","paramString","i","concat","get","cardsPack","put","showMyPacksAC","showMyPacks","page","setCurrentPageAC","setShowByAC","pageCount","changePortionAC","flag","setPortionAC","portion","searchPacksAC","packName","initState","fromServer","cardPacks","cardPacksTotalCount","maxCardsCount","minCardsCount","sortBy","sortParam","onlyMyPacks","currentPortion","sortMin","sortMax","searchParam","getPacksTC","getState","paramObject","packsReducer","sortPacks","user_id","max","min","payload","changePortionTC","setPortionTC","Sorting","sortDirection","sortRegular","sortCheck","radioSort","checked","onChange","regularSort","sortBtn","sortTypeCheck","Pack","cardsCount","toggleEditPackPopUp","toggleDeletePackPopUp","disabledDeleteBtn","pack__btn","pack__btn_del","disabledEditBtn","pack__btn_edit","pack","pack__row","pack__interface","AddPack","toggleCreatePackPopUp","createPack","createPack__formWrap","close","AddPackReduxForm","formData","private","createPack__form","createPack__formGroup","s2","checkboxGroup","EditPack","editPack","editPack__formWrap","EditPackReduxForm","initialValues","editPack__form","editPack__formGroup","Search","searchBy","onSearchSubmit","SearchReduxForm","open","setOpen","setSearchParam","body","document","querySelector","searchToggle","e","target","classList","contains","addEventListener","removeEventListener","searchByMap","map","idx","key","prev","Pagination","currentPage","itemsOnPage","onPageChange","pagesInPortion","totalItems","onShowByChange","onPortionChange","setPortionChange","totalPages","Math","ceil","totalPortions","pages","push","firstPageInPortion","lastPageInPortion","pagesMap","filter","f","m","lastPage","portionWithLastPage","firstPage","portionWithFirstPage","openSelect","setOpenSelect","showByChange","showBy","closeShowBy","PacksLoading","RangeSlider","fromVal","step","toVal","searchByMinMax","MIN","MAX","STEP","range","setRange","rangeSlider","values","renderTrack","children","rangeSlider__track","onMouseDown","onTouchStart","style","rangeSlider__progress","ref","background","getTrackBackground","colors","renderThumb","index","isDragged","rangeSlider__thumb","rangeSlider__thumbInner","backgroundColor","rangeSlider__thumbInnerIndex","DeletePack","deletePack","onClose","Packs","React","memo","packsState","createPackPopUp","setCreatePackPopUp","editPackPopUp","setEditPackPopUp","deletePackPopUp","setDeletePackPopUp","useCallback","args","sortUrl","changePageTC","showByTC","packsMap","sortMap","sort","packs","packs__interface","packs__btn","queryParam","reset","valArr","packs__sortBlock","packs__sortTitle","packs__sortBtns","packsTable","packsTable__header","deletePackTC","cardsApi","card","searchCardsAC","cardAnswer","cardQuestion","packIdAC","packId","fromCardsServer","cards","cardsTotalCount","maxGrade","minGrade","searchParams","getCardsTC","cardsReducer","sortCards","cardsPack_id","Card","answer","question","toggleEditCardPopUp","toggleDeleteCardPopUp","userId","card__btn","card__btn_del","card__btn_edit","card__row","card__interface","AddCard","createCard","createCard__formWrap","AddCardReduxForm","createCard__form","createCard__formGroup","EditCard","editCard","editCard__formWrap","EditCardReduxForm","comments","editCard__form","editCard__formGroup","DeleteCard","deleteCard","cardsPackId","Cards","cardsState","createCardPopUp","setCreateCardPopUp","editCardPopUp","setEditCardPopUp","deleteCardPopUp","setDeleteCardPopUp","toggleCreateCardPopUp","checkIfPackIsYours","cardsMap","isPackEmpty","cards__interface","cards__btn","cards__sortBlock","cards__sortTitle","cards__sortBtns","cardsTable","cardsTable__header","deleteCardTC","NotFound","notFound","notFound__title","notFound__text","notFound__link","learnApi","gradeParam","gradeLoadingAC","Learn","gradeReducer","grade","toFixed","foo","arr","newArr","forEach","el","entriesAmount","pow","cardInx","floor","random","setCard","showAnswer","setShowAnswer","gradeQuestion","card_id","learnTC","disableBtn","nextCard","App","appReducer","exact","path","render","rootReducers","combineReducers","formReducer","action","restorePasswordReducer","createStore","applyMiddleware","thunkMiddleware","ReactDOM","basename","getElementById"],"mappings":"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","file":"static/js/main.16edfbc9.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileBlock\":\"Profile_profileBlock__2hAkn\",\"profileContent\":\"Profile_profileContent__sSKnn\",\"profileContent__left\":\"Profile_profileContent__left__2fJmI\",\"profileContent__right\":\"Profile_profileContent__right__182Xu\",\"profileContent__ava\":\"Profile_profileContent__ava__4KdR4\",\"profileContent__userData\":\"Profile_profileContent__userData__1QNRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pack\":\"Pack_pack__tmaeP\",\"pack__row\":\"Pack_pack__row__K4Xaw\",\"pack__interface\":\"Pack_pack__interface___ZJs5\",\"pack__btn\":\"Pack_pack__btn__35241\",\"pack__btn_del\":\"Pack_pack__btn_del__2V0G5\",\"pack__btn_edit\":\"Pack_pack__btn_edit__2l5S5\",\"disabled\":\"Pack_disabled__lRgh1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__15ZqB\",\"card__row\":\"Card_card__row__2BxvA\",\"card__interface\":\"Card_card__interface__AUvy1\",\"card__btn\":\"Card_card__btn__38NsQ\",\"card__btn_del\":\"Card_card__btn_del__1I9xk\",\"card__btn_edit\":\"Card_card__btn_edit__2KMkv\",\"disabled\":\"Card_disabled__3LBy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"Cards_cards__1cdG5\",\"cards__interface\":\"Cards_cards__interface__3pU5N\",\"active\":\"Cards_active__xTTqt\",\"cards__btn\":\"Cards_cards__btn__bGMUu\",\"disabled\":\"Cards_disabled__39-fv\",\"cards__sortBlock\":\"Cards_cards__sortBlock__-yrmn\",\"cards__sortTitle\":\"Cards_cards__sortTitle__1OTko\",\"cards__sortBtns\":\"Cards_cards__sortBtns__RKwiA\",\"cardsTable__header\":\"Cards_cardsTable__header__37juP\"};","import React from \"react\";\r\nimport s from './formField.module.scss';\r\n\r\nconst FormField = (Element: string) => ({input, meta, ...props}: any) => {\r\n\r\n    const error = meta.touched && meta.error;\r\n\r\n    return (\r\n        <>\r\n            <Element {...input} {...props}/>\r\n            {\r\n                error &&\r\n                <div className={s.formFieldError}>{meta.error}</div>\r\n            }\r\n        </>\r\n    )\r\n};\r\n\r\nexport const Input = FormField('input');\r\nexport const Textarea = FormField('textarea');","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://neko-back.herokuapp.com/2.0/',\r\n    withCredentials: true,\r\n});\r\n\r\nexport type LoginResponseObjectType = {\r\n    _id: string\r\n    email: string\r\n    name: string\r\n    avatar?: string\r\n    publicCardPacksCount: number // количество колод\r\n    created: string\r\n    updated: string\r\n    isAdmin: boolean\r\n    verified: boolean // подтвердил ли почту\r\n    rememberMe: boolean\r\n    token: string\r\n    tokenDeathTime: number\r\n}\r\nexport type LogoutResponseObjectType = {\r\n    info: string\r\n    error: string\r\n}\r\nexport type ForgotPasswordResponseObjectType = {\r\n    info: string\r\n    error: string\r\n}\r\n\r\nexport const authApi = {\r\n    registration(email: string, password: string) {\r\n        return instance.post('auth/register', {email, password})\r\n            .then(res => console.log(res.data))\r\n    },\r\n    authMe() {\r\n        return instance\r\n            .post<LoginResponseObjectType>(`auth/me`)\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean = false) {\r\n        return instance\r\n            .post<LoginResponseObjectType>(`auth/login`, {\r\n                email, password, rememberMe\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    logout() {\r\n        return instance\r\n            .delete<LogoutResponseObjectType>(`auth/me`)\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    restorePassword(email: string, from: string, message: string) {\r\n        return instance\r\n            .post<ForgotPasswordResponseObjectType>(`auth/forgot`, {\r\n                email, from, message\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    setNewPassword(password: string, resetPasswordToken: string) {\r\n        return instance\r\n            .post<ForgotPasswordResponseObjectType>(`auth/set-new-password`, {\r\n                password, resetPasswordToken\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n}","import { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {authApi, LoginResponseObjectType} from \"../../api/authApi\";\r\n\r\nconst AUTH_ME = 'AUTH_ME';\r\nconst LOGIN = 'LOGIN';\r\nconst LOGOUT = 'LOGOUT';\r\nconst ERROR = 'ERROR';\r\nconst LOADING = 'LOADING';\r\n\r\nexport type AuthMeACType = {\r\n    type: typeof AUTH_ME\r\n    isAuth: boolean\r\n    userProfile: LoginResponseObjectType\r\n};\r\ntype LoginACType = {\r\n    type: typeof LOGIN\r\n    isAuth: boolean\r\n    userProfile: LoginResponseObjectType\r\n};\r\ntype LogoutACType = {\r\n    type: typeof LOGOUT\r\n    isAuth: boolean\r\n};\r\ntype ErrorACType = {\r\n    type: typeof ERROR\r\n    error: string | null\r\n};\r\ntype LoadingACType = {\r\n    type: typeof LOADING\r\n    isLoading: boolean\r\n};\r\n\r\nexport const authMeAC = (isAuth: boolean, userProfile: LoginResponseObjectType): AuthMeACType => {\r\n    return {\r\n        type: AUTH_ME,\r\n        isAuth,\r\n        userProfile\r\n    }\r\n};\r\nexport const loginAC = (isAuth: boolean, userProfile: LoginResponseObjectType): LoginACType => {\r\n    return {\r\n        type: LOGIN,\r\n        isAuth,\r\n        userProfile\r\n    }\r\n};\r\nexport const logoutAC = (isAuth: boolean): LogoutACType => {\r\n    return {\r\n        type: LOGOUT,\r\n        isAuth,\r\n    }\r\n};\r\nexport const errorAC = (error: string | null): ErrorACType => {\r\n    return {\r\n        type: ERROR,\r\n        error,\r\n    }\r\n};\r\nexport const loadingAC = (isLoading: boolean): LoadingACType => {\r\n    return {\r\n        type: LOADING,\r\n        isLoading,\r\n    }\r\n};\r\n\r\ntype ActionTypes = AuthMeACType | LogoutACType | LoginACType | ErrorACType | LoadingACType;\r\n\r\nexport type AuthStateType = {\r\n    isLoading: boolean\r\n    isAuth: boolean\r\n    error: string | null\r\n    userProfile: LoginResponseObjectType\r\n};\r\n\r\nconst authInitState = {\r\n    isLoading: false,\r\n    isAuth: false,\r\n    error: null,\r\n    userProfile: {\r\n        _id: '',\r\n        email: '',\r\n        name: '',\r\n        avatar: '',\r\n        publicCardPacksCount: 0, // количество колод\r\n        created: '',\r\n        updated: '',\r\n        isAdmin: false,\r\n        verified: false, // подтвердил ли почту\r\n        rememberMe: false,\r\n        token: '',\r\n        tokenDeathTime: 0,\r\n    }\r\n};\r\n\r\nexport const authReducer = (state: AuthStateType = authInitState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case AUTH_ME:\r\n            return {...state, isAuth: action.isAuth, userProfile: action.userProfile};\r\n        case LOGIN:\r\n            return {...state, isAuth: action.isAuth, userProfile: action.userProfile};\r\n        case LOGOUT:\r\n            return {...state, isAuth: action.isAuth};\r\n        case ERROR:\r\n            return {...state, error: action.error};\r\n        case LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const authMeTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        const res = await authApi.authMe();\r\n        dispatch(authMeAC(true, res));\r\n    } catch (e) {\r\n        console.log(e.response.data.error)\r\n    }\r\n}\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        const res = await authApi.login(email, password, rememberMe);\r\n        dispatch(loginAC(true, res));\r\n        dispatch(loadingAC(false));\r\n    } catch (e) {\r\n        if ( e.response.data.error === \"not valid email/password /ᐠ-ꞈ-ᐟ\\\\\") {\r\n            dispatch(loadingAC(false));\r\n            dispatch(errorAC('Incorrect password or email.'))\r\n            setTimeout(() => {\r\n                dispatch(errorAC(null));\r\n            }, 3000)\r\n        } else {\r\n            dispatch(loadingAC(false));\r\n            dispatch(errorAC(e.response.data.error));\r\n            setTimeout(() => {\r\n                dispatch(errorAC(null));\r\n            }, 3000)\r\n        }\r\n    }\r\n}\r\nexport const logoutTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        await authApi.logout();\r\n        dispatch(logoutAC(false));\r\n    } catch (e) {\r\n        console.log(e.response.data.error)\r\n    }\r\n}","export const fieldRequired = (value: string) => {\r\n    if (value) {\r\n        return undefined;\r\n    }\r\n    return \"Field is required\";\r\n};\r\nexport const minLength = (minLength: number) => (value: string) => {\r\n    if (value && value.length < minLength) {\r\n        return 'Password length must be 8 symbols or more.'\r\n    } else if (value && value.length >= minLength) {\r\n        return undefined;\r\n    } else {\r\n        return 'Field is required.'\r\n    }\r\n}","import React from \"react\";\r\nimport './AuthLoading.css';\r\n\r\nexport const AuthLoading = () => {\r\n    return (\r\n        <div className=\"auth-loading\">\r\n            <div className=\"auth-loading__inner\">\r\n                <div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {PropsWithChildren, useEffect} from \"react\";\r\nimport s from '../authStyles/authStyles.module.css';\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {authMeTC, AuthStateType, loginTC} from \"../../reducers/authReducers/loginReducer\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {fieldRequired} from \"../../utils/formValidation/formValidation\";\r\nimport {AuthLoading} from \"../../utils/loading/authLoading/AuthLoading\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\n\r\ntype LoginFormType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {isAuth, error, isLoading} = authState;\r\n\r\n    const onSubmit = (loginData: LoginFormType) => {\r\n        dispatch(loginTC(loginData.email, loginData.password, loginData.rememberMe));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('isAuth')) {\r\n            dispatch(authMeTC());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.authFormBlock}>\r\n            <div className={isLoading ? `${s.authFormWrap} ${s.disabled}` : `${s.authFormWrap}`}>\r\n                <div className={s.authFormTitle}>Login</div>\r\n                <ReduxLoginForm onSubmit={onSubmit}/>\r\n                {\r\n                    isLoading &&\r\n                    <AuthLoading/>\r\n                }\r\n            </div>\r\n            {\r\n                error &&\r\n                <div className={s.authFormError}>\r\n                    {error}\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormType>> = (props: PropsWithChildren<InjectedFormProps<LoginFormType>>) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={s.authForm}>\r\n            <div className={s.authForm__formGroup}>\r\n                <Field component={Input} name={'email'} type={'email'} placeholder={'email'} id={'emailLogin'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <div className={s.authForm__formGroup}>\r\n                <Field component={Input} name={'password'} type={'password'} placeholder={'password'}\r\n                       id={'passwordLogin'} validate={[fieldRequired]}/>\r\n            </div>\r\n            <div className={s.authForm__info}>\r\n                <Link to={'/restorePassword'}>Forgot your password?</Link>\r\n            </div>\r\n            <div className={s.authForm__checkboxGroup}>\r\n                <Field component={Input} name={'rememberMe'} type={'checkbox'} id={'checkboxLogin'}/>\r\n                <label htmlFor=\"checkboxLogin\">Remember Me</label>\r\n            </div>\r\n            <div className={s.authForm__formGroup}>\r\n                <button>Login</button>\r\n            </div>\r\n            <div className={s.authForm__info}>\r\n                New user?&nbsp;<Link to={'/registration'}>Register now.</Link>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst ReduxLoginForm = reduxForm<LoginFormType>({\r\n    form: 'LoginForm'\r\n})(LoginForm);","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {authApi} from \"../../api/authApi\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\n\r\nconst REGISTER = 'REGISTER';\r\nconst LOADING = 'LOADING';\r\nconst ERROR = 'ERROR';\r\n\r\ntype RegisterACType = {\r\n    type: typeof REGISTER\r\n    registrationSuccess: boolean\r\n}\r\ntype ErrorACType = {\r\n    type: typeof ERROR\r\n    error: string | null\r\n}\r\ntype LoadingACType = {\r\n    type: typeof LOADING\r\n    isLoading: boolean\r\n};\r\nexport const loadingAC = (isLoading: boolean): LoadingACType => {\r\n    return {\r\n        type: LOADING,\r\n        isLoading,\r\n    }\r\n};\r\n\r\nconst registerAC = (registrationSuccess: boolean): RegisterACType => ({\r\n    type: REGISTER,\r\n    registrationSuccess,\r\n});\r\nconst errorAC = (error: string | null): ErrorACType => ({\r\n    type: ERROR,\r\n    error\r\n});\r\n\r\ntype ActionTypes = RegisterACType | ErrorACType | LoadingACType;\r\n\r\nexport type RegistrationInitialStateType = {\r\n    registrationSuccess: boolean\r\n    error: string | null\r\n    isLoading: boolean\r\n}\r\nconst initialState = {\r\n    registrationSuccess: false,\r\n    error: null,\r\n    isLoading: false,\r\n};\r\n\r\nexport const registrationReducer = (state: RegistrationInitialStateType = initialState, action: ActionTypes) => {\r\n\r\n    switch (action.type) {\r\n        case REGISTER:\r\n            return { ...state, registrationSuccess: action.registrationSuccess };\r\n        case ERROR:\r\n            return { ...state, error: action.error };\r\n        case LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const registrationTC = (email: string, password: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await authApi.registration(email, password);\r\n        dispatch(registerAC(true));\r\n        dispatch(loadingAC(false));\r\n    } catch (e) {\r\n        dispatch(errorAC(e.response.data.error));\r\n        dispatch(loadingAC(false));\r\n        setTimeout(() => {\r\n            dispatch(errorAC(null));\r\n        }, 3000)\r\n    }\r\n};\r\nexport const errorTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(errorAC('Passwords do not match.'));\r\n    setTimeout(() => {\r\n        dispatch(errorAC(null));\r\n    }, 3000)\r\n};\r\n\r\n","import React, {PropsWithChildren} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {errorTC, RegistrationInitialStateType, registrationTC} from \"../../reducers/authReducers/registrationReducer\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired, minLength} from \"../../utils/formValidation/formValidation\";\r\nimport s from \"../authStyles/authStyles.module.css\";\r\nimport {AuthLoading} from \"../../utils/loading/authLoading/AuthLoading\";\r\n\r\ntype regFormType = {\r\n    email: string\r\n    password: string\r\n    repeatPassword: string\r\n}\r\n\r\nexport const Registration: React.FC = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const registrationState = useSelector<AppRootStateType, RegistrationInitialStateType>(store => store.registrationReducer);\r\n    const {error, isLoading, registrationSuccess} = registrationState;\r\n\r\n    const onSubmit = (registrationData: regFormType) => {\r\n        if (registrationData.password === registrationData.repeatPassword) {\r\n            dispatch(registrationTC(registrationData.email, registrationData.password))\r\n        } else {\r\n            dispatch(errorTC());\r\n            return;\r\n        }\r\n    };\r\n\r\n    if (registrationSuccess) {\r\n        return <Redirect to={'/login'}/>\r\n    }\r\n\r\n    return (\r\n\r\n        <div className={s.authFormBlock}>\r\n            <div className={s.authFormWrap}>\r\n                <div className={s.authFormTitle}>Registration</div>\r\n                <ReduxRegistrationForm onSubmit={onSubmit}/>\r\n                {\r\n                    isLoading &&\r\n                    <AuthLoading/>\r\n                }\r\n            </div>\r\n            {\r\n                error &&\r\n                <div className={s.authFormError}>\r\n                    {error}\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nconst minLengthValidation = minLength(8);\r\nconst RegistrationForm: React.FC<InjectedFormProps<regFormType>> =\r\n    (props: PropsWithChildren<InjectedFormProps<regFormType>>) => {\r\n        return (\r\n            <form onSubmit={props.handleSubmit} className={s.authForm}>\r\n                <div className={s.authForm__formGroup}>\r\n                    <Field component={Input} type={'email'} placeholder={'email'}\r\n                           validate={[fieldRequired]}\r\n                           id={'registrationEmail'} name={'email'}/>\r\n                </div>\r\n                <div className={s.authForm__formGroup}>\r\n                    <Field component={Input} type={'password'}\r\n                           placeholder={'password'} validate={[fieldRequired, minLengthValidation]}\r\n                           id={'registrationPassword'} name={'password'}/>\r\n                </div>\r\n                <div className={s.authForm__formGroup}>\r\n                    <Field component={Input} placeholder={'repeat password'} type={'password'}\r\n                           validate={[fieldRequired]}\r\n                           id={'registrationRepeatPassword'} name={'repeatPassword'}/>\r\n                </div>\r\n                <div className={s.authForm__formGroup}>\r\n                    <button>Send</button>\r\n                </div>\r\n                <div className={s.authForm__info}>\r\n                    Have an account?&nbsp;<Link to={'/login'}>Sign in.</Link>\r\n                </div>\r\n            </form>\r\n        )\r\n    };\r\n\r\nconst ReduxRegistrationForm = reduxForm<regFormType>({\r\n    form: 'RegistrationForm'\r\n})(RegistrationForm);\r\n\r\n","import React, {useEffect} from \"react\";\r\nimport s from './Profile.module.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {authMeTC, AuthStateType} from \"../../reducers/authReducers/loginReducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport dummy_img from '../../assets/img/user.png';\r\n\r\nexport const Profile = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {isAuth, userProfile} = authState;\r\n\r\n    useEffect(() => {\r\n        dispatch(authMeTC());\r\n    }, [dispatch])\r\n\r\n    if (!isAuth) {\r\n        return <Redirect to={'/login'}/>\r\n    }\r\n\r\n    //const expirationDate = new Date(userProfile.tokenDeathTime).toLocaleString();\r\n\r\n    return (\r\n        <div className={s.profileBlock}>\r\n            <div className={'container'}>\r\n                <div className={s.profileContent}>\r\n                    <div className={s.profileContent__left}>\r\n                        <div className={s.profileContent__ava}>\r\n                            {\r\n                                userProfile.avatar\r\n                                    ? <img src={userProfile.avatar} alt={'user ava'}/>\r\n                                    : <img src={dummy_img} alt={'user ava'}/>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className={s.profileContent__right}>\r\n                        <div className={s.profileContent__userData}>\r\n                            Name: {userProfile.name}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            User id: {userProfile._id}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Email: {userProfile.email}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Created: {userProfile.created}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Admin: {userProfile.isAdmin ? 'yes' : 'no'}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Cards pack: {userProfile.publicCardPacksCount}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Remember login: {userProfile.rememberMe ? 'yes' : 'no'}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Updated: {userProfile.updated}\r\n                        </div>\r\n                        <div className={s.profileContent__userData}>\r\n                            Verified: {userProfile.verified ? 'yes' : 'no'}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {authApi} from \"../../api/authApi\";\r\n\r\nconst RESTORE_PASSWORD = 'RESTORE_PASSWORD';\r\n\r\ntype RestorePasswordACType = {\r\n    type: typeof RESTORE_PASSWORD\r\n    restored: boolean\r\n};\r\nconst restorePasswordAC = (restored: boolean): RestorePasswordACType => {\r\n    return {\r\n        type: RESTORE_PASSWORD,\r\n        restored,\r\n    }\r\n}\r\n\r\ntype ActionTypes = RestorePasswordACType;\r\n\r\nexport type RestorePasswordStateType = {\r\n    restored: boolean\r\n}\r\nconst restorePasswordInitState: RestorePasswordStateType = {\r\n    restored: false,\r\n}\r\n\r\nexport const restorePasswordReducer = (state: RestorePasswordStateType = restorePasswordInitState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case RESTORE_PASSWORD:\r\n            return {...state, restored: action.restored}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const restorePasswordTC = (email: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        const message =\r\n            `<div style=\"background-color: lime; padding: 15px\">\r\n                password recovery link: \r\n                <a href=\"https://alexey6486.github.io/friday_project/#/set-new-password/$token$\">link</a>\r\n            </div>`\r\n        await authApi.restorePassword(email, 'alexey6486@gmail.com', message);\r\n        dispatch(restorePasswordAC(true));\r\n    } catch (e) {\r\n        console.log(e.response.data.error)\r\n    }\r\n}","import React, {PropsWithChildren, useState} from \"react\";\r\nimport sr from './RestorePassword.module.css';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {restorePasswordTC} from \"../../reducers/authReducers/restorePasswordReducer\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport s from \"../authStyles/authStyles.module.css\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired} from \"../../utils/formValidation/formValidation\";\r\n\r\ntype RestorePasswordFormType = {\r\n    email: string\r\n}\r\n\r\nexport const RestorePassword = () => {\r\n\r\n    const [showPopUp, setShowPopUp] = useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (restoreData: RestorePasswordFormType) => {\r\n        dispatch(restorePasswordTC(restoreData.email));\r\n        setShowPopUp(true);\r\n    }\r\n\r\n    return (\r\n        <div className={s.authFormBlock}>\r\n            <div className={s.authFormWrap}>\r\n                <div className={s.authFormTitle}>Restore password</div>\r\n                <ReduxRestorePasswordForm onSubmit={onSubmit}/>\r\n            </div>\r\n            {\r\n                showPopUp &&\r\n                <div className={sr.restorePasswordPopUp}>\r\n                    <div className={sr.restorePasswordPopUp__content}>\r\n                        <div className={sr.restorePasswordPopUp__info}>Follow the link that has been sent to your\r\n                            email.\r\n                        </div>\r\n                        <Link to={'/login'}>OK</Link>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst RestorePasswordForm: React.FC<InjectedFormProps<RestorePasswordFormType>> = (props: PropsWithChildren<InjectedFormProps<RestorePasswordFormType>>) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={s.authForm}>\r\n            <div className={s.authForm__formGroup}>\r\n                <Field component={Input} name={'email'} type={'email'} placeholder={'enter your email address'}\r\n                       id={'emailRestore'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <div className={s.authForm__formGroup}>\r\n                <button>Restore</button>\r\n            </div>\r\n            <div className={s.authForm__info}>\r\n                Remember password?&nbsp;<Link to={'/login'}>Sign in.</Link>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst ReduxRestorePasswordForm = reduxForm<RestorePasswordFormType>({\r\n    form: 'RestorePasswordForm'\r\n})(RestorePasswordForm);","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {authApi} from \"../../api/authApi\";\r\n\r\nconst SET_NEW_PASSWORD = 'SET_NEW_PASSWORD';\r\nconst ERROR = 'ERROR';\r\nconst LOADING = 'LOADING';\r\n\r\ntype SetNewPasswordACType = {\r\n    type: typeof SET_NEW_PASSWORD\r\n    passwordIsSet: boolean\r\n};\r\ntype ErrorACType = {\r\n    type: typeof ERROR\r\n    error: string | null\r\n};\r\ntype LoadingACType = {\r\n    type: typeof LOADING\r\n    isLoading: boolean\r\n};\r\n\r\nconst setNewPassword = (passwordIsSet: boolean): SetNewPasswordACType => {\r\n    return {\r\n        type: SET_NEW_PASSWORD,\r\n        passwordIsSet,\r\n    }\r\n};\r\nexport const errorAC = (error: string | null): ErrorACType => {\r\n    return {\r\n        type: ERROR,\r\n        error,\r\n    }\r\n};\r\nexport const loadingAC = (isLoading: boolean): LoadingACType => {\r\n    return {\r\n        type: LOADING,\r\n        isLoading,\r\n    }\r\n};\r\n\r\ntype ActionTypes = SetNewPasswordACType | ErrorACType | LoadingACType;\r\n\r\nexport type SetNewPasswordStateType = {\r\n    passwordIsSet: boolean\r\n    isLoading: boolean\r\n    error: string | null\r\n};\r\n\r\nconst SetNewPasswordInitState: SetNewPasswordStateType = {\r\n    passwordIsSet: false,\r\n    isLoading: false,\r\n    error: null,\r\n};\r\n\r\nexport const newPassword = (state: SetNewPasswordStateType = SetNewPasswordInitState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case SET_NEW_PASSWORD:\r\n            return {...state, passwordIsSet: action.passwordIsSet};\r\n        case ERROR:\r\n            return {...state, error: action.error};\r\n        case LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const setNewPasswordTC = (password: string, resetPasswordToken: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await authApi.setNewPassword(password, resetPasswordToken);\r\n        dispatch(setNewPassword(true));\r\n        dispatch(loadingAC(false));\r\n    } catch (e) {\r\n        dispatch(loadingAC(false));\r\n        console.log(e.response.data.error)\r\n        dispatch(errorAC(e.response.data.error));\r\n        setTimeout(() => {\r\n            dispatch(errorAC(null));\r\n        }, 3000)\r\n    }\r\n};\r\nexport const errorTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(errorAC('Passwords do not match.'));\r\n    setTimeout(() => {\r\n        dispatch(errorAC(null));\r\n    }, 3000)\r\n};","import React, {PropsWithChildren} from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport s from \"../authStyles/authStyles.module.css\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired, minLength} from \"../../utils/formValidation/formValidation\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport {errorTC, SetNewPasswordStateType, setNewPasswordTC} from \"../../reducers/authReducers/newPasswordReducer\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {AuthLoading} from \"../../utils/loading/authLoading/AuthLoading\";\r\n\r\ntype ParamsType = {\r\n    token: string\r\n}\r\ntype PropsType = RouteComponentProps<ParamsType>\r\n\r\ntype SetNewPasswordFormType = {\r\n    password: string\r\n    repeatPassword: string\r\n};\r\n\r\nconst NewPassword = (props: PropsType) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const setNewPasswordState = useSelector<AppRootStateType, SetNewPasswordStateType>(state => state.newPassword);\r\n    const {passwordIsSet, isLoading, error} = setNewPasswordState;\r\n\r\n\r\n    const onSubmit = (newData: SetNewPasswordFormType) => {\r\n        const token = props.match.params.token;\r\n\r\n        if (newData.password === newData.repeatPassword) {\r\n            dispatch(setNewPasswordTC(newData.password, token))\r\n        } else {\r\n            dispatch(errorTC());\r\n            return;\r\n        }\r\n    }\r\n\r\n    if (passwordIsSet) {\r\n        return <Redirect to={'/login'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.authFormBlock}>\r\n            <div className={s.authFormWrap}>\r\n                <div className={s.authFormTitle}>New password</div>\r\n                <ReduxSetNewPasswordForm onSubmit={onSubmit}/>\r\n                {\r\n                    isLoading &&\r\n                    <AuthLoading/>\r\n                }\r\n            </div>\r\n            {\r\n                error &&\r\n                <div className={s.authFormError}>\r\n                    {error}\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n};\r\nconst minLengthValidation = minLength(8);\r\nconst SetNewPasswordForm: React.FC<InjectedFormProps<SetNewPasswordFormType>> = (props: PropsWithChildren<InjectedFormProps<SetNewPasswordFormType>>) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={s.authForm}>\r\n            <div className={s.authForm__formGroup}>\r\n                <Field component={Input} type={'password'}\r\n                       placeholder={'password'} validate={[fieldRequired, minLengthValidation]}\r\n                       id={'newPassword'} name={'password'}/>\r\n            </div>\r\n            <div className={s.authForm__formGroup}>\r\n                <Field component={Input} placeholder={'repeat password'} type={'password'}\r\n                       validate={[fieldRequired]}\r\n                       id={'newRepeatPassword'} name={'repeatPassword'}/>\r\n            </div>\r\n            <div className={s.authForm__formGroup}>\r\n                <button>Send</button>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst ReduxSetNewPasswordForm = reduxForm<SetNewPasswordFormType>({\r\n    form: 'SetNewPasswordForm'\r\n})(SetNewPasswordForm);\r\n\r\nexport const NewPasswordWithRouter = withRouter(NewPassword);","import { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport {AppRootStateType} from \"../store/store\";\r\nimport {authApi} from \"../api/authApi\";\r\nimport {authMeAC, AuthMeACType} from \"../reducers/authReducers/loginReducer\";\r\n\r\nconst APP_INITIALIZED = 'APP_INITIALIZED';\r\n\r\ntype AppInitACType = {\r\n    type: typeof APP_INITIALIZED\r\n    isInit: boolean\r\n};\r\n\r\nconst appInitAC = (isInit: boolean): AppInitACType => {\r\n    return {\r\n        type: APP_INITIALIZED,\r\n        isInit\r\n    }\r\n};\r\n\r\ntype ActionTypes = AppInitACType | AuthMeACType;\r\n\r\nexport type AppStateType = {\r\n    isInit: boolean\r\n};\r\n\r\nconst appInitialState: AppStateType = {\r\n    isInit: false\r\n};\r\n\r\nexport const appReducer = (state: AppStateType = appInitialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case APP_INITIALIZED:\r\n            return {...state, isInit: action.isInit};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const appInitializedTC = ():ThunkType  => async (dispatch: ThunkDispatch<AppStateType, {}, ActionTypes>) => {\r\n    try {\r\n        const res = await authApi.authMe();\r\n        dispatch(authMeAC(true, res));\r\n        dispatch(appInitAC(true));\r\n    } catch (e) {\r\n        dispatch(appInitAC(true));\r\n        console.log(e.response.data.error)\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport './AppInitLoading.css';\r\n\r\nexport const AppInitLoading = () => {\r\n    return (\r\n        <div className=\"loadingio-spinner-gear-pzuuy69rnz\">\r\n            <div className=\"ldio-ookrzkze3oj\">\r\n                <div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport s from './Header.module.scss';\r\nimport {Link, RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {logoutTC} from \"../reducers/authReducers/loginReducer\";\r\n\r\ntype RoutePropsType = {}\r\ntype OtherPropsType = {}\r\ntype PropsType = RouteComponentProps<RoutePropsType> & OtherPropsType;\r\n\r\nconst HeaderComponent = (props: PropsType) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const logout = () => {\r\n        dispatch(logoutTC())\r\n    };\r\n\r\n    const {history} = props;\r\n    const currentUrl = history.location.pathname;\r\n\r\n    return (\r\n        <div className={s.header}>\r\n            <div className={'container'}>\r\n                <div className={s.headerNav}>\r\n                    <Link to={'/'}\r\n                          className={currentUrl === '/' ? `${s.headerNav__link} ${s.active}` : `${s.headerNav__link}`}>Profile</Link>\r\n                    <Link to={'/packs'}\r\n                          className={currentUrl === '/packs' ? `${s.headerNav__link} ${s.active}` : `${s.headerNav__link}`}>Packs</Link>\r\n                </div>\r\n                <div className={s.header__logout} onClick={logout}>Logout</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Header = withRouter(HeaderComponent);","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://neko-back.herokuapp.com/2.0/',\r\n    withCredentials: true,\r\n});\r\n\r\nexport type CardInPackType = {\r\n    _id: string\r\n    user_id: string\r\n    name: string\r\n    path: string\r\n    grade: number\r\n    shots: number\r\n    rating: number\r\n    type: string\r\n    created: string\r\n    updated: string\r\n    __v: number\r\n    cardsCount: number\r\n}\r\nexport type GetPacksReturnObject = {\r\n    cardPacks: Array<CardInPackType>\r\n    cardPacksTotalCount: number\r\n    maxCardsCount: number\r\n    minCardsCount: number\r\n    page: number\r\n    pageCount: number\r\n}\r\n\r\nexport interface ParamTypes extends Record<string, any> {\r\n    packName?: string | number\r\n    min?: number | null\r\n    max?: number | null\r\n    sortPacks?: string\r\n    page: number\r\n    pageCount: number\r\n    user_id?: string | number\r\n}\r\n\r\nexport type CreatePackObject = {\r\n    name?: string\r\n    path?: string\r\n    grade?: number\r\n    shots?: number\r\n    rating?: number\r\n    deckCover?: string\r\n    private?: boolean\r\n    type?: string\r\n}\r\nexport type EditPackObject = {\r\n    _id: string\r\n    name?: string\r\n}\r\nexport type SearchObject = {\r\n    packName?: string\r\n    cardAnswer?: string\r\n    cardQuestion?: string\r\n}\r\n\r\nexport const packsApi = {\r\n    getPacks(params: ParamTypes) {\r\n\r\n        let paramString: string = '';\r\n\r\n        for (let i in params) {\r\n            paramString = paramString.concat(`${i}=${params[i]}&`)\r\n        }\r\n\r\n        return instance\r\n            .get(`cards/pack?${paramString}`)\r\n            .then((res) => {\r\n                return res.data;\r\n            })\r\n    },\r\n    createPack(cardsPack: CreatePackObject) {\r\n        return instance\r\n            .post(`cards/pack`,{\r\n                cardsPack\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    editPack(cardsPack: EditPackObject) {\r\n        return instance\r\n            .put(`cards/pack`, {\r\n                cardsPack\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    deletePack(id: string) {\r\n        return instance\r\n            .delete(`cards/pack?id=${id}`)\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n}\r\n","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {CreatePackObject, EditPackObject, GetPacksReturnObject, packsApi} from \"../../api/packsApi\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\n\r\nconst LOADING = 'LOADING';\r\nconst GET_PACKS = 'GET_PACKS';\r\nconst SORT = 'SORT';\r\nconst SET_SORT_PARAM = 'SET_SORT_PARAM';\r\nconst SHOW_MY_PACKS = 'SHOW_MY_PACKS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_SHOW_BY = 'SET_SHOW_BY';\r\nconst CHANGE_PORTION = 'CHANGE_PORTION';\r\nconst SET_PORTION = 'SET_PORTION';\r\nconst SET_MIN_MAX = 'SET_MIN_MAX';\r\nconst SEARCH_PACKS = 'SEARCH_PACKS';\r\n\r\ntype GetPacksACType = {\r\n    type: typeof GET_PACKS\r\n    payload: GetPacksReturnObject\r\n};\r\ntype SortACType = {\r\n    type: typeof SORT\r\n};\r\ntype SetSortParamACType = {\r\n    type: typeof SET_SORT_PARAM\r\n    sortParam: string\r\n};\r\ntype ShowMyPacksACType = {\r\n    type: typeof SHOW_MY_PACKS\r\n    showMyPacks: boolean\r\n    page: number\r\n};\r\ntype SetCurrentPageACType = {\r\n    type: typeof SET_CURRENT_PAGE\r\n    page: number\r\n};\r\ntype SetShowByACType = {\r\n    type: typeof SET_SHOW_BY\r\n    pageCount: number\r\n};\r\ntype ChangePortionACType = {\r\n    type: typeof CHANGE_PORTION\r\n    flag: boolean\r\n};\r\ntype SetPortionACType = {\r\n    type: typeof SET_PORTION\r\n    portion: number\r\n};\r\ntype LoadingACType = {\r\n    type: typeof LOADING\r\n    isLoading: boolean\r\n};\r\ntype SetMinMaxACType = {\r\n    type: typeof SET_MIN_MAX\r\n    min: number\r\n    max: number\r\n};\r\ntype SearchPacksACType = {\r\n    type: typeof SEARCH_PACKS\r\n    packName: string\r\n};\r\n\r\nconst getPacksAC = (payload: GetPacksReturnObject): GetPacksACType => {\r\n    return {\r\n        type: GET_PACKS,\r\n        payload,\r\n    }\r\n};\r\nconst sortAC = (): SortACType => {\r\n    return {\r\n        type: SORT\r\n    }\r\n};\r\nconst setSortParamAC = (sortParam: string): SetSortParamACType => {\r\n    return {\r\n        type: SET_SORT_PARAM,\r\n        sortParam,\r\n    }\r\n};\r\nconst showMyPacksAC = (showMyPacks: boolean, page: number): ShowMyPacksACType => {\r\n    return {\r\n        type: SHOW_MY_PACKS,\r\n        showMyPacks,\r\n        page\r\n    }\r\n};\r\nconst setCurrentPageAC = (page: number): SetCurrentPageACType => {\r\n    return {\r\n        type: SET_CURRENT_PAGE,\r\n        page\r\n    }\r\n};\r\nconst setShowByAC = (pageCount: number): SetShowByACType => {\r\n    return {\r\n        type: SET_SHOW_BY,\r\n        pageCount\r\n    }\r\n};\r\nconst changePortionAC = (flag: boolean): ChangePortionACType => {\r\n    return {\r\n        type: CHANGE_PORTION,\r\n        flag\r\n    }\r\n};\r\nconst setPortionAC = (portion: number): SetPortionACType => {\r\n    return {\r\n        type: SET_PORTION,\r\n        portion\r\n    }\r\n};\r\nconst loadingAC = (isLoading: boolean): LoadingACType => {\r\n    return {\r\n        type: LOADING,\r\n        isLoading\r\n    }\r\n};\r\nexport const setMinMaxAC = (min: number, max: number): SetMinMaxACType => {\r\n    return {\r\n        type: SET_MIN_MAX,\r\n        min,\r\n        max,\r\n    }\r\n};\r\nexport const searchPacksAC = (packName: string): SearchPacksACType => {\r\n    return {\r\n        type: SEARCH_PACKS,\r\n        packName\r\n    }\r\n};\r\n\r\ntype ActionTypes =\r\n    GetPacksACType\r\n    | SortACType\r\n    | ShowMyPacksACType\r\n    | SetCurrentPageACType\r\n    | SetShowByACType\r\n    | ChangePortionACType\r\n    | SetPortionACType\r\n    | LoadingACType\r\n    | SetSortParamACType\r\n    | SetMinMaxACType\r\n    | SearchPacksACType;\r\n\r\nexport type PackStateType = {\r\n    fromServer: GetPacksReturnObject\r\n    sortBy: boolean\r\n    sortParam: string\r\n    onlyMyPacks: boolean\r\n    currentPortion: number\r\n    isLoading: boolean\r\n    sortMin: number\r\n    sortMax: number\r\n    searchParam: string\r\n};\r\n\r\nconst initState: PackStateType = {\r\n    fromServer: {\r\n        cardPacks: [],\r\n        cardPacksTotalCount: 0,\r\n        maxCardsCount: 20,\r\n        minCardsCount: 0,\r\n        page: 1,\r\n        pageCount: 5,\r\n    },\r\n    sortBy: true,\r\n    sortParam: '',\r\n    onlyMyPacks: false,\r\n    currentPortion: 1,\r\n    isLoading: false,\r\n    sortMin: 0,\r\n    sortMax: 20,\r\n    searchParam: '',\r\n};\r\n\r\nexport const packsReducer = (state: PackStateType = initState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case GET_PACKS:\r\n            return {\r\n                ...state,\r\n                fromServer: {\r\n                    ...state.fromServer,\r\n                    cardPacks: action.payload.cardPacks,\r\n                    cardPacksTotalCount: action.payload.cardPacksTotalCount,\r\n                    maxCardsCount: action.payload.maxCardsCount < 20 ? 20 : action.payload.maxCardsCount,\r\n                }\r\n            };\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, fromServer: {...state.fromServer, page: action.page}};\r\n        case SET_SHOW_BY:\r\n            return {...state, fromServer: {...state.fromServer, pageCount: action.pageCount}};\r\n        case CHANGE_PORTION:\r\n            return {...state, currentPortion: action.flag ? state.currentPortion + 1 : state.currentPortion - 1};\r\n        case SET_PORTION:\r\n            return {...state, currentPortion: action.portion};\r\n        case SET_SORT_PARAM:\r\n            return {...state, sortParam: action.sortParam};\r\n        case SORT:\r\n            return {...state, sortBy: !state.sortBy};\r\n        case SHOW_MY_PACKS:\r\n            return {...state, onlyMyPacks: action.showMyPacks, fromServer: {...state.fromServer, page: action.page}};\r\n        case LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        case SET_MIN_MAX:\r\n            return {...state, sortMin: action.min, sortMax: action.max};\r\n        case SEARCH_PACKS:\r\n            return {...state, searchParam: action.packName};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\n\r\nexport const getPacksTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>, getState: () => AppRootStateType) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        const state = getState();\r\n\r\n        const paramObject = {\r\n            page: state.packsReducer.fromServer.page,\r\n            pageCount: state.packsReducer.fromServer.pageCount,\r\n            sortPacks: state.packsReducer.sortParam,\r\n            user_id: state.packsReducer.onlyMyPacks ? state.authReducer.userProfile._id : '',\r\n            max: state.packsReducer.sortMax,\r\n            min: state.packsReducer.sortMin,\r\n            packName: state.packsReducer.searchParam,\r\n        }\r\n\r\n        const res = await packsApi.getPacks(paramObject);\r\n        dispatch(getPacksAC(res));\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const createPackTC = (payload: CreatePackObject): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await packsApi.createPack(payload);\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const editPackTC = (payload: EditPackObject): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await packsApi.editPack(payload);\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const deletePackTC = (id: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await packsApi.deletePack(id);\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const sortTC = (sortPacks: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(sortAC());\r\n        dispatch(setSortParamAC(sortPacks));\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const showOnlyMyPacksTC = (showMyPacks: boolean, page: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(showMyPacksAC(showMyPacks, page));\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const changePageTC = (page: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(setCurrentPageAC(page));\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const showByTC = (pageCount: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(setShowByAC(pageCount));\r\n        dispatch(getPacksTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const changePortionTC = (flag: boolean): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        dispatch(changePortionAC(flag));\r\n    } catch (error) {\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const setPortionTC = (portion: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        dispatch(setPortionAC(portion));\r\n    } catch (error) {\r\n        console.log(error.response.data.error);\r\n    }\r\n};","import React from \"react\";\r\nimport s from './Sorting.module.scss';\r\n\r\ntype PropsType = {\r\n    sortDirection: string\r\n    onlyMyPacks?: boolean\r\n    sortRegular: (sortDirection: string) => void\r\n    sortCheck?: () => void\r\n}\r\n\r\nexport const Sorting = (props: PropsType) => {\r\n\r\n    const {sortDirection, onlyMyPacks, sortRegular, sortCheck} = props;\r\n\r\n    const radioSort = <div className={s.sortCheck}>\r\n        <input type={'checkbox'} id={'radioMyPacks'} checked={onlyMyPacks} onChange={sortCheck}/>\r\n        <label htmlFor=\"radioMyPacks\">only my packs</label>\r\n    </div>\r\n    const regularSort = <button className={s.sortBtn} onClick={() => sortRegular(sortDirection)}>{sortDirection}</button>\r\n    const sortTypeCheck = sortDirection === 'user_id' ? radioSort : regularSort;\r\n\r\n    return (\r\n        <>\r\n            {sortTypeCheck}\r\n        </>\r\n    )\r\n}","import React from \"react\";\r\nimport s from './Pack.module.scss';\r\nimport {CardInPackType} from \"../../api/packsApi\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {AuthStateType} from \"../../reducers/authReducers/loginReducer\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\ntype PropsType = CardInPackType & {\r\n    toggleEditPackPopUp: (_id: string, args: Array<string>) => void\r\n    toggleDeletePackPopUp: (id: string) => void\r\n};\r\n\r\nexport const Pack = (props: PropsType) => {\r\n\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {userProfile} = authState;\r\n\r\n    const {name, cardsCount, created, _id, user_id, toggleEditPackPopUp, toggleDeletePackPopUp} = props;\r\n\r\n    const deletePack = (id: string) => {\r\n        toggleDeletePackPopUp(id);\r\n    }\r\n    const editPackHandler = () => {\r\n        toggleEditPackPopUp(_id, [name]);\r\n    }\r\n\r\n    const disabledDeleteBtn = userProfile._id === user_id ? `${s.pack__btn} ${s.pack__btn_del}` : `${s.pack__btn} ${s.disabled}`;\r\n    const disabledEditBtn = userProfile._id === user_id ? `${s.pack__btn} ${s.pack__btn_edit}` : `${s.pack__btn} ${s.disabled}`;\r\n\r\n    return (\r\n        <div className={s.pack}>\r\n\r\n            <div className={s.pack__row}>\r\n                <div>{name}</div>\r\n                <div>{cardsCount}</div>\r\n                <div>{created}</div>\r\n            </div>\r\n\r\n            <div className={s.pack__interface}>\r\n                <Link className={s.pack__btn} to={`/learn/${_id}`}>Learn</Link>\r\n                <Link className={s.pack__btn} to={`/cards/${_id}`}>Open</Link>\r\n                <button className={disabledEditBtn} onClick={editPackHandler}>Edit</button>\r\n                <button className={disabledDeleteBtn} onClick={() => deletePack(_id)}>Delete</button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}","import React, {PropsWithChildren} from \"react\";\r\nimport s from './AddPack.module.scss';\r\nimport s2 from '../../utils/formFields/formField.module.scss';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {createPackTC} from \"../../reducers/packsReducer/packsReducer\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {CreatePackObject} from \"../../api/packsApi\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired} from \"../../utils/formValidation/formValidation\";\r\n\r\ntype PropsType = {\r\n    toggleCreatePackPopUp: () => void\r\n}\r\n\r\nexport const AddPack = (props: PropsType) => {\r\n\r\n    const {toggleCreatePackPopUp} = props;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: CreatePackObject) => {\r\n        dispatch(createPackTC({name: formData.name, private: formData.private = false}));\r\n        toggleCreatePackPopUp();\r\n    }\r\n\r\n    const onClose = () => {\r\n        toggleCreatePackPopUp()\r\n    }\r\n\r\n    return (\r\n        <div className={s.createPack}>\r\n            <div className={s.createPack__formWrap}>\r\n                <div className={s.close} onClick={onClose}></div>\r\n                <AddPackReduxForm onSubmit={onSubmit}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst AddPackForm: React.FC<InjectedFormProps<CreatePackObject>> = (props: PropsWithChildren<InjectedFormProps<CreatePackObject>>) => {\r\n\r\n    return (\r\n        <form className={s.createPack__form} onSubmit={props.handleSubmit}>\r\n            <div className={s.createPack__formGroup}>\r\n                <Field component={Input} type={'text'} name={'name'} placeholder={'pack name'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <div className={s2.checkboxGroup}>\r\n                <Field component={Input} type={'checkbox'} name={'private'} id={'checkboxAddPack'}/>\r\n                <label htmlFor=\"checkboxAddPack\">Private</label>\r\n            </div>\r\n            <button>Create</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst AddPackReduxForm = reduxForm<CreatePackObject>({\r\n    form: 'AddPackForm'\r\n})(AddPackForm);","import React, {PropsWithChildren} from \"react\";\r\nimport s from './EditPack.module.scss';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {editPackTC} from \"../../reducers/packsReducer/packsReducer\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {EditPackObject} from \"../../api/packsApi\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired} from \"../../utils/formValidation/formValidation\";\r\n\r\ntype PropsType = {\r\n    toggleEditPackPopUp: (_id: string, args: Array<string>) => void\r\n    id: string\r\n    name: string\r\n}\r\n\r\nexport const EditPack = (props: PropsType) => {\r\n\r\n    const {toggleEditPackPopUp, id, name} = props;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: EditPackObject) => {\r\n        dispatch(editPackTC({_id: id, name: formData.name,}));\r\n        toggleEditPackPopUp('', []);\r\n    }\r\n\r\n    const onClose = () => {\r\n        toggleEditPackPopUp('', [])\r\n    }\r\n\r\n    return (\r\n        <div className={s.editPack}>\r\n            <div className={s.editPack__formWrap}>\r\n                <div className={s.close} onClick={onClose}></div>\r\n                <EditPackReduxForm onSubmit={onSubmit} initialValues={{name}}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst EditPackForm: React.FC<InjectedFormProps<EditPackObject>> = (props: PropsWithChildren<InjectedFormProps<EditPackObject>>) => {\r\n\r\n    return (\r\n        <form className={s.editPack__form} onSubmit={props.handleSubmit}>\r\n            <div className={s.editPack__formGroup}>\r\n                <Field component={Input} type={'text'} name={'name'} placeholder={'new pack name'} value={'test'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <button>Save</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst EditPackReduxForm = reduxForm<EditPackObject>({\r\n    form: 'EditPackForm'\r\n})(EditPackForm);","import React, {PropsWithChildren, useEffect, useState} from \"react\";\r\nimport './Search.styles.scss';\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../formFields/formFields\";\r\nimport {SearchObject} from \"../../api/packsApi\";\r\n\r\ntype PropsToReduxType = {\r\n    searchBy: Array<string>\r\n}\r\ntype PropsType = PropsToReduxType & {\r\n    onSearchSubmit: (queryParam: SearchObject) => void\r\n}\r\n\r\nexport const Search = (props: PropsType) => {\r\n\r\n    const {searchBy, onSearchSubmit} = props;\r\n\r\n    const onSubmit = (formData: SearchObject) => {\r\n        const query = formData;\r\n        if (query) {\r\n            onSearchSubmit(query);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={'searchBlock'}>\r\n            <SearchReduxForm onSubmit={onSubmit} searchBy={searchBy}/>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst SearchForm: React.FC<InjectedFormProps<SearchObject, PropsToReduxType> & PropsToReduxType> = (props: PropsWithChildren<InjectedFormProps<SearchObject, PropsToReduxType>> & PropsToReduxType) => {\r\n\r\n    const {searchBy} = props;\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [searchParam, setSearchParam] = useState(searchBy[0]);\r\n\r\n    const searchOptionHandler = (param: string) => {\r\n        setSearchParam(param);\r\n        setOpen(prev => !prev);\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        const body = document.querySelector('body');\r\n\r\n        const searchToggle = (e: MouseEvent) => {\r\n\r\n            const target = e.target as HTMLElement;\r\n\r\n            if (e.target) {\r\n                if (!target.classList.contains('searchOption') && !target.classList.contains('searchOptionsBtn')) setOpen(false);\r\n            }\r\n        }\r\n\r\n        if (body) body.addEventListener('click', searchToggle);\r\n\r\n        return () => {\r\n            if (body) body.removeEventListener('click', searchToggle);\r\n        }\r\n\r\n    }, [])\r\n\r\n    const searchByMap = searchBy.map((i, idx) => <div key={idx} className={'searchOption'}\r\n                                                      onClick={() => searchOptionHandler(i)}>{i}</div>);\r\n\r\n    return (\r\n        <form onSubmit={props.handleSubmit} id={'searchForm'}>\r\n            <div className={'searchFieldGroup'}>\r\n                <Field component={Input} type={'text'} name={`${searchParam}`}\r\n                       placeholder={`search by ${searchParam}`}/>\r\n                <div className={open ? 'searchOptions open' : 'searchOptions'}>\r\n                    {searchByMap}\r\n                </div>\r\n            </div>\r\n            <div className={open ? 'searchOptionsBtn open' : 'searchOptionsBtn'}\r\n                 onClick={() => setOpen(prev => !prev)}></div>\r\n            <button>Search</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst SearchReduxForm = reduxForm<SearchObject, PropsToReduxType>({form: 'SearchForm'})(SearchForm);","import React, {useEffect, useState} from \"react\";\r\nimport './Pagination.styles.scss';\r\n\r\ntype PropsType = {\r\n    currentPage: number\r\n    totalItems: number\r\n    itemsOnPage: number\r\n    pagesInPortion: number\r\n    currentPortion: number\r\n    onPageChange: (page: number) => void\r\n    onShowByChange: (showBy: number) => void\r\n    onPortionChange: (flag: boolean) => void\r\n    setPortionChange: (portion: number) => void\r\n}\r\n\r\nexport const Pagination = (props: PropsType) => {\r\n\r\n    const {currentPage, itemsOnPage, onPageChange, pagesInPortion, totalItems, onShowByChange, onPortionChange, currentPortion, setPortionChange} = props;\r\n\r\n    const onPageChangeHandler = (page: number) => {\r\n        onPageChange(page);\r\n    }\r\n\r\n    const totalPages = Math.ceil(totalItems / itemsOnPage);\r\n    const totalPortions = Math.ceil(totalPages / pagesInPortion);\r\n\r\n    let pages = [];\r\n    for (let i = 1; i <= totalPages; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    const nextPortion = () => {\r\n        onPortionChange(true)\r\n    };\r\n    const prevPortion = () => {\r\n        onPortionChange(false)\r\n    };\r\n\r\n    const firstPageInPortion = (currentPortion - 1) * pagesInPortion + 1;\r\n    const lastPageInPortion = currentPortion * pagesInPortion;\r\n\r\n    const pagesMap = pages\r\n        .filter(f => f >= firstPageInPortion && f <= lastPageInPortion)\r\n        .map(m => {\r\n            return (\r\n                <button key={m} onClick={() => onPageChangeHandler(m)}\r\n                        className={m === currentPage ? 'active pageBtn' : 'pageBtn'}>{m}</button>\r\n            )\r\n        })\r\n\r\n    const portionWithLastPage = (page: number) => {\r\n        onPageChange(page);\r\n        setPortionChange(totalPortions);\r\n    };\r\n\r\n    const portionWithFirstPage = (page: number) => {\r\n        onPageChange(page);\r\n        setPortionChange(1);\r\n    };\r\n\r\n    const lastPage = pages.map(page => {\r\n        if (page === pages.length) {\r\n            return (\r\n                <div key={page} className={'paginationBlock__pre-after'}>\r\n                    <div className={'paginationDots'}>...</div>\r\n                    <button onClick={() => portionWithLastPage(page)}\r\n                            className={page === currentPage ? 'active pageBtn' : 'pageBtn'}>{page}</button>\r\n                </div>\r\n            )\r\n        }\r\n        return null;\r\n    });\r\n\r\n    const firstPage = pages.map(page => {\r\n        if (page === 1) {\r\n            return (\r\n                <div key={page} className={'paginationBlock__pre-after'}>\r\n                    <button onClick={() => portionWithFirstPage(page)}\r\n                            className={page === currentPage ? 'active pageBtn' : 'pageBtn'}>{page}</button>\r\n                    <div className={'paginationDots'}>...</div>\r\n                </div>\r\n            )\r\n        }\r\n        return null;\r\n    });\r\n\r\n    const [openSelect, setOpenSelect] = useState(false);\r\n    const onSelectOpenClick = () => {\r\n        setOpenSelect(!openSelect);\r\n    }\r\n    const showByChange = (showBy: number) => {\r\n        onShowByChange(showBy);\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        const body = document.querySelector('body');\r\n\r\n        const closeShowBy = (e: MouseEvent) => {\r\n\r\n            const target = e.target as HTMLElement;\r\n\r\n            if (e.target) {\r\n                if (!target.classList.contains('paginationSelect') &&\r\n                    !target.classList.contains('paginationSelect__option')) setOpenSelect(false)\r\n            }\r\n        }\r\n\r\n        if (body) body.addEventListener('click', closeShowBy);\r\n\r\n        return () => {\r\n            if (body) body.removeEventListener('click', closeShowBy);\r\n        }\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <div className={'pagination'}>\r\n            <div className={'paginationBlock'}>\r\n                {currentPortion > 1 && <button onClick={prevPortion}>prev</button>}\r\n                {currentPortion > 1 && firstPage}\r\n                {pagesMap}\r\n                {currentPortion < totalPortions && lastPage}\r\n                {currentPortion < totalPortions && <button onClick={nextPortion}>next</button>}\r\n            </div>\r\n            <div className={'paginationSelectBlock'}>\r\n                <div className={'paginationSelectBlock__title'}>Show by:</div>\r\n                <div className={openSelect ? 'paginationSelect open' : 'paginationSelect'}\r\n                     onClick={onSelectOpenClick}>\r\n                    <div className={'paginationSelect__current'}>{itemsOnPage}</div>\r\n                    <div\r\n                        className={openSelect ? 'paginationSelect__options open' : 'paginationSelect__options'}>\r\n                        <div className={'paginationSelect__option'} onClick={() => showByChange(5)}>5</div>\r\n                        <div className={'paginationSelect__option'} onClick={() => showByChange(10)}>10</div>\r\n                        <div className={'paginationSelect__option'} onClick={() => showByChange(15)}>15</div>\r\n                        <div className={'paginationSelect__option'} onClick={() => showByChange(20)}>20</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}","import React from \"react\";\r\nimport './PacksLoading.scss';\r\n\r\nexport const PacksLoading = () => {\r\n    return (\r\n        <div className=\"packs-loading\">\r\n            <div className=\"packs-loading__inner\">\r\n                <div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState} from \"react\";\r\nimport s from './RangeSlider.module.scss';\r\nimport {getTrackBackground, Range} from \"react-range\";\r\n\r\ntype PropsType = {\r\n    min: number\r\n    max: number\r\n    step: number\r\n    fromVal: number\r\n    toVal: number\r\n    searchByMinMax: (valArr: Array<number>) => void\r\n}\r\n\r\nexport const RangeSlider = (props: PropsType) => {\r\n\r\n    const {fromVal, max, min, step, toVal, searchByMinMax} = props;\r\n\r\n    const MIN = min;\r\n    const MAX = max;\r\n    const STEP = step;\r\n    const [range, setRange] = useState([fromVal, toVal]);\r\n\r\n    const searchHandler = () => {\r\n        searchByMinMax(range);\r\n    }\r\n\r\n    return (\r\n        <div className={s.rangeSlider}>\r\n            <Range values={range} step={STEP} min={MIN} max={MAX} onChange={values => setRange(values)}\r\n                   renderTrack={({ props, children }) => (\r\n                       <div className={s.rangeSlider__track} onMouseDown={props.onMouseDown} onTouchStart={props.onTouchStart}\r\n                            style={{...props.style,}}>\r\n                           <div className={s.rangeSlider__progress} ref={props.ref}\r\n                                style={{\r\n                                    background: getTrackBackground({\r\n                                        values: range,\r\n                                        colors: ['#fff', '#5d626f', '#fff'],\r\n                                        min: MIN,\r\n                                        max: MAX\r\n                                    }),\r\n                                }}\r\n                           >\r\n                               {children}\r\n                           </div>\r\n                       </div>\r\n                   )}\r\n                   renderThumb={({ index, props, isDragged }) => (\r\n                       <div className={s.rangeSlider__thumb} {...props} style={{ ...props.style, }} >\r\n                           <div className={s.rangeSlider__thumbInner} style={{backgroundColor: isDragged ? '#fa9716' : '#fff'}}>\r\n                               <div className={s.rangeSlider__thumbInnerIndex}>\r\n                                   {range[index]}\r\n                               </div>\r\n                           </div>\r\n                       </div>\r\n                   )}\r\n            />\r\n            <button onClick={searchHandler}>Search</button>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport './DeletePack.styles.scss';\r\n\r\ntype PropsType = {\r\n    toggleDeletePackPopUp: (id: string) => void\r\n    deletePack: (id: string) => void\r\n    id: string\r\n}\r\n\r\nexport const DeletePack = (props: PropsType) => {\r\n\r\n    const {toggleDeletePackPopUp, deletePack, id} = props;\r\n\r\n    const onClose = () => {\r\n        toggleDeletePackPopUp('')\r\n    }\r\n\r\n    const onConfirm = () => {\r\n        deletePack(id);\r\n        toggleDeletePackPopUp('');\r\n    }\r\n\r\n    return (\r\n        <div className={'deletePack'}>\r\n            <div className={'deletePack__wrap'}>\r\n                <div className={'close'} onClick={onClose}></div>\r\n                <div className={'deletePack__wrap-title'}>Delete the pack?</div>\r\n                <div className={'deletePack__wrap-btns'}>\r\n                    <button onClick={onConfirm}>Yes</button>\r\n                    <button onClick={onClose}>No</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {useCallback, useEffect, useState} from \"react\";\r\nimport s from './Packs.module.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../store/store\";\r\nimport {\r\n    changePageTC,\r\n    changePortionTC,\r\n    deletePackTC,\r\n    getPacksTC,\r\n    PackStateType,\r\n    searchPacksAC,\r\n    setMinMaxAC,\r\n    setPortionTC,\r\n    showByTC,\r\n    showOnlyMyPacksTC,\r\n    sortTC\r\n} from \"../reducers/packsReducer/packsReducer\";\r\nimport {Sorting} from \"../utils/sorting/Sorting\";\r\nimport {Pack} from \"./pack/Pack\";\r\nimport {AddPack} from \"./addPack/AddPack\";\r\nimport {EditPack} from \"./editPack/EditPack\";\r\nimport {AuthStateType} from \"../reducers/authReducers/loginReducer\";\r\nimport {Search} from \"../utils/search/Search\";\r\nimport {Pagination} from \"../utils/pagination/Pagination\";\r\nimport {PacksLoading} from \"../utils/loading/packsLoading/PacksLoading\";\r\nimport {reset} from \"redux-form\";\r\nimport {SearchObject} from \"../api/packsApi\";\r\nimport {RangeSlider} from \"../utils/rangeSlider/RangeSlider\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {DeletePack} from \"./deletePack/DeletePack\";\r\n\r\nexport const Packs = React.memo(() => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const packsState = useSelector<AppRootStateType, PackStateType>(state => state.packsReducer);\r\n    const {fromServer, sortBy, onlyMyPacks, currentPortion, isLoading, sortMax, sortMin} = packsState;\r\n\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {isAuth} = authState;\r\n\r\n    // create/edit/delete pop ups\r\n    const [createPackPopUp, setCreatePackPopUp] = useState(false);\r\n    const [editPackPopUp, setEditPackPopUp] = useState<Array<string>>([]);\r\n    const [deletePackPopUp, setDeletePackPopUp] = useState('');\r\n\r\n    const toggleCreatePackPopUp = useCallback(() => {\r\n        setCreatePackPopUp(prev => !prev);\r\n    }, []);\r\n    const toggleEditPackPopUp = useCallback((_id: string, args: Array<string>) => {\r\n        if (_id) {\r\n            setEditPackPopUp([_id, ...args]);\r\n        } else {\r\n            setEditPackPopUp([]);\r\n        }\r\n    }, []);\r\n    const toggleDeletePackPopUp = useCallback((id: string) => {\r\n        setDeletePackPopUp(id);\r\n    }, []);\r\n    ///\r\n\r\n    // sorting\r\n    const sortRegular = useCallback((sortDirection: string) => {\r\n        const sortUrl = sortBy ? `1${sortDirection}` : `0${sortDirection}`;\r\n        dispatch(sortTC(sortUrl));\r\n    }, [dispatch, sortBy]);\r\n\r\n    const sortCheck = useCallback(() => {\r\n        dispatch(showOnlyMyPacksTC(!onlyMyPacks, 1));\r\n        dispatch(setPortionTC(1));\r\n    }, [dispatch, onlyMyPacks]);\r\n    ///\r\n\r\n    // pagination\r\n    const onPageChange = useCallback((page: number) => {\r\n        dispatch(changePageTC(page));\r\n    }, [dispatch]);\r\n\r\n    const onShowByChange = useCallback((pageCount: number) => {\r\n        dispatch(showByTC(pageCount));\r\n    }, [dispatch]);\r\n\r\n    const onPortionChange = useCallback((flag: boolean) => {\r\n        flag ? dispatch(changePortionTC(true)) : dispatch(changePortionTC(false));\r\n    }, [dispatch]);\r\n\r\n    const setPortionChange = useCallback((portion: number) => {\r\n        dispatch(setPortionTC(portion));\r\n    }, [dispatch]);\r\n    ///\r\n\r\n    // search\r\n    const onSearchSubmit = (queryParam: SearchObject) => {\r\n        if (queryParam.packName) {\r\n            dispatch(searchPacksAC(queryParam.packName));\r\n            dispatch(getPacksTC());\r\n            dispatch(reset('SearchForm'));\r\n        } else {\r\n            dispatch(searchPacksAC(''));\r\n            dispatch(getPacksTC());\r\n            dispatch(reset('SearchForm'));\r\n        }\r\n    }\r\n    ///\r\n\r\n    // range slider\r\n    const searchByMinMax = (valArr: Array<number>) => {\r\n        dispatch(setMinMaxAC(valArr[0], valArr[1]));\r\n        dispatch(getPacksTC());\r\n    }\r\n    ///\r\n\r\n    // delete pack\r\n    const deletePack = (id: string) => {\r\n        dispatch(deletePackTC(id));\r\n    }\r\n    ///\r\n\r\n    useEffect(() => {\r\n        dispatch(getPacksTC());\r\n    }, []);\r\n\r\n    const packsMap = fromServer.cardPacks\r\n        .map(pack => <Pack key={pack._id} {...pack} toggleEditPackPopUp={toggleEditPackPopUp}\r\n                                                    toggleDeletePackPopUp={toggleDeletePackPopUp}/>);\r\n\r\n    const sortArray = ['name', 'cardsCount', 'created', 'user_id'];\r\n    const sortMap = sortArray\r\n        .map((sort, idx) => <Sorting key={idx} sortDirection={sort} onlyMyPacks={onlyMyPacks}\r\n                                                          sortCheck={sortCheck} sortRegular={sortRegular}/>);\r\n\r\n    if (!isAuth) {\r\n        return <Redirect to={'/login'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.packs}>\r\n            <div className={'container'}>\r\n\r\n                <div className={s.packs__interface}>\r\n\r\n                    <button className={s.packs__btn} onClick={toggleCreatePackPopUp}>add new pack</button>\r\n\r\n                    <Search searchBy={['packName']} onSearchSubmit={onSearchSubmit}/>\r\n\r\n                    <RangeSlider max={fromServer.maxCardsCount} min={fromServer.minCardsCount} step={1}\r\n                                 fromVal={sortMin} toVal={sortMax} searchByMinMax={searchByMinMax}/>\r\n\r\n                    <div className={s.packs__sortBlock}>\r\n                        <div className={s.packs__sortTitle}>Sort by:</div>\r\n                        <div className={s.packs__sortBtns}>{sortMap}</div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className={s.packsTable}>\r\n\r\n                    <div className={s.packsTable__header}>\r\n                        <div>Pack name</div>\r\n                        <div>Cards</div>\r\n                        <div>Created</div>\r\n                    </div>\r\n\r\n                    {isLoading ? <PacksLoading/> : packsMap}\r\n\r\n                </div>\r\n\r\n                <Pagination currentPage={fromServer.page} itemsOnPage={fromServer.pageCount} onPageChange={onPageChange}\r\n                            pagesInPortion={5} totalItems={fromServer.cardPacksTotalCount}\r\n                            onShowByChange={onShowByChange} onPortionChange={onPortionChange}\r\n                            currentPortion={currentPortion} setPortionChange={setPortionChange}/>\r\n\r\n            </div>\r\n\r\n            {\r\n                createPackPopUp &&\r\n                <AddPack toggleCreatePackPopUp={toggleCreatePackPopUp}/>\r\n            }\r\n            {\r\n                editPackPopUp[0] &&\r\n                <EditPack toggleEditPackPopUp={toggleEditPackPopUp} id={editPackPopUp[0]} name={editPackPopUp[1]}/>\r\n            }\r\n            {\r\n                deletePackPopUp &&\r\n                <DeletePack toggleDeletePackPopUp={toggleDeletePackPopUp} deletePack={deletePack} id={deletePackPopUp}/>\r\n            }\r\n        </div>\r\n    )\r\n})","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://neko-back.herokuapp.com/2.0/',\r\n    withCredentials: true,\r\n});\r\n\r\nexport type CardType = {\r\n    answer: string\r\n    question: string\r\n    cardsPack_id: string\r\n    grade: number\r\n    rating: number\r\n    shots: number\r\n    type: string\r\n    created: string\r\n    updated: string\r\n    __v: number\r\n    _id: string\r\n    user_id: string\r\n}\r\nexport type GetCardsResponseObjectType = {\r\n    cards: Array<CardType>\r\n    cardsTotalCount: number\r\n    maxGrade: number\r\n    minGrade: number\r\n    page: number\r\n    pageCount: number\r\n}\r\n\r\nexport interface CardsParamTypes extends Record<string, any> {\r\n    cardAnswer?: string\r\n    cardQuestion?: string\r\n    cardsPack_id: string\r\n    min?: number\r\n    max?: number\r\n    sortCards?: string\r\n    page: number\r\n    pageCount: number\r\n}\r\n\r\nexport type CreateCardObject = {\r\n    cardsPack_id: string\r\n    question?: string\r\n    answer?: string\r\n    grade?: number\r\n    shots?: number\r\n    rating?: number\r\n    answerImg?: string\r\n    questionImg?: string\r\n    questionVideo?: string\r\n    answerVideo?: string\r\n    type?: string\r\n}\r\nexport type EditCardObject = {\r\n    _id: string\r\n    question?: string\r\n    answer?: string\r\n    comments?: string\r\n}\r\nexport type SearchCardObject = {\r\n    name: string\r\n}\r\n\r\nexport const cardsApi = {\r\n    getCards(params: CardsParamTypes) {\r\n\r\n        let paramString: string = '';\r\n\r\n        for (let i in params) {\r\n            paramString = paramString.concat(`${i}=${params[i]}&`)\r\n        }\r\n\r\n        return instance\r\n            .get(`cards/card?${paramString}`)\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    createCard(card: CreateCardObject) {\r\n        return instance\r\n            .post(`cards/card`, {\r\n                card\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    editCard(card: EditCardObject) {\r\n        return instance\r\n            .put(`cards/card`, {\r\n                card\r\n            })\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n    deleteCard(id: string) {\r\n        return instance\r\n            .delete(`cards/card?id=${id}`)\r\n            .then((res) => {\r\n                return res.data\r\n            })\r\n    },\r\n};","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {\r\n    cardsApi,\r\n    CardsParamTypes,\r\n    CreateCardObject,\r\n    EditCardObject,\r\n    GetCardsResponseObjectType\r\n} from \"../../api/cardsApi\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {packsApi, ParamTypes} from \"../../api/packsApi\";\r\n\r\nconst LOADING = 'LOADING';\r\nconst GET_CARDS = 'GET_CARDS';\r\nconst PACK_ID = 'PACK_ID';\r\nconst SET_CURRENT_CARDS_PAGE = 'SET_CURRENT_CARDS_PAGE';\r\nconst SET_SHOW_CARDS_BY = 'SET_SHOW_CARDS_BY';\r\nconst CHANGE_CARDS_PORTION = 'CHANGE_CARDS_PORTION';\r\nconst SET_CARDS_PORTION = 'SET_CARDS_PORTION';\r\nconst SORT_CARDS = 'SORT_CARDS';\r\nconst SET_CARDS_SORT_PARAM = 'SET_CARDS_SORT_PARAM';\r\nconst SET_MIN_MAX_GRADE = 'SET_MIN_MAX_GRADE';\r\nconst SEARCH_CARDS = 'SEARCH_CARDS';\r\n\r\ntype SetMinMaxGradeACType = {\r\n    type: typeof SET_MIN_MAX_GRADE\r\n    min: number\r\n    max: number\r\n};\r\ntype SearchCardsACType = {\r\n    type: typeof SEARCH_CARDS\r\n    cardAnswer: string\r\n    cardQuestion: string\r\n};\r\ntype GetCardsACType = {\r\n    type: typeof GET_CARDS\r\n    payload: GetCardsResponseObjectType\r\n}\r\ntype LoadingACType = {\r\n    type: typeof LOADING\r\n    isLoading: boolean\r\n};\r\ntype PackIdACType = {\r\n    type: typeof PACK_ID\r\n    packId: string\r\n};\r\ntype SetCurrentPageACType = {\r\n    type: typeof SET_CURRENT_CARDS_PAGE\r\n    page: number\r\n};\r\ntype SetShowByACType = {\r\n    type: typeof SET_SHOW_CARDS_BY\r\n    pageCount: number\r\n};\r\ntype ChangePortionACType = {\r\n    type: typeof CHANGE_CARDS_PORTION\r\n    flag: boolean\r\n};\r\ntype SetPortionACType = {\r\n    type: typeof SET_CARDS_PORTION\r\n    portion: number\r\n};\r\ntype SortCardsACType = {\r\n    type: typeof SORT_CARDS\r\n};\r\ntype SetCardsSortParamACType = {\r\n    type: typeof SET_CARDS_SORT_PARAM\r\n    sortParam: string\r\n};\r\n\r\ntype ActionTypes = SearchCardsACType | SetMinMaxGradeACType | GetCardsACType | LoadingACType | PackIdACType | SetCurrentPageACType | SetShowByACType | ChangePortionACType | SetPortionACType | SortCardsACType | SetCardsSortParamACType;\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\n\r\nconst loadingAC = (isLoading: boolean): LoadingACType => {\r\n    return {\r\n        type: LOADING,\r\n        isLoading\r\n    }\r\n};\r\nexport const setMinMaxGradeAC = (min: number, max: number): SetMinMaxGradeACType => {\r\n    return {\r\n        type: SET_MIN_MAX_GRADE,\r\n        min,\r\n        max,\r\n    }\r\n};\r\nexport const searchCardsAC = (cardAnswer: string, cardQuestion: string): SearchCardsACType => {\r\n    return {\r\n        type: SEARCH_CARDS,\r\n        cardAnswer,\r\n        cardQuestion\r\n    }\r\n};\r\nconst getCardsAC = (payload: GetCardsResponseObjectType): GetCardsACType => {\r\n    return {\r\n        type: GET_CARDS,\r\n        payload,\r\n    }\r\n};\r\nexport const packIdAC = (packId: string): PackIdACType => {\r\n    return {\r\n        type: PACK_ID,\r\n        packId\r\n    }\r\n};\r\nexport const setCurrentPageAC = (page: number): SetCurrentPageACType => {\r\n    return {\r\n        type: SET_CURRENT_CARDS_PAGE,\r\n        page\r\n    }\r\n};\r\nconst setShowByAC = (pageCount: number): SetShowByACType => {\r\n    return {\r\n        type: SET_SHOW_CARDS_BY,\r\n        pageCount\r\n    }\r\n};\r\nconst changePortionAC = (flag: boolean): ChangePortionACType => {\r\n    return {\r\n        type: CHANGE_CARDS_PORTION,\r\n        flag\r\n    }\r\n};\r\nconst setPortionAC = (portion: number): SetPortionACType => {\r\n    return {\r\n        type: SET_CARDS_PORTION,\r\n        portion\r\n    }\r\n};\r\nconst sortCardsAC = (): SortCardsACType => {\r\n    return {\r\n        type: SORT_CARDS\r\n    }\r\n};\r\nconst setCardsSortParamAC = (sortParam: string): SetCardsSortParamACType => {\r\n    return {\r\n        type: SET_CARDS_SORT_PARAM,\r\n        sortParam,\r\n    }\r\n};\r\n\r\nexport type CardsStateType = {\r\n    fromCardsServer: GetCardsResponseObjectType\r\n    sortBy: boolean\r\n    sortParam: string\r\n    currentPortion: number\r\n    isLoading: boolean\r\n    packId: string\r\n    searchParams: {\r\n        cardAnswer: string,\r\n        cardQuestion: string\r\n    }\r\n    sortMin: number\r\n    sortMax: number\r\n};\r\n\r\nconst initState: CardsStateType = {\r\n    fromCardsServer: {\r\n        cards: [],\r\n        cardsTotalCount: 0,\r\n        maxGrade: 5,\r\n        minGrade: 0,\r\n        page: 1,\r\n        pageCount: 5,\r\n    },\r\n    sortBy: true,\r\n    sortParam: '',\r\n    currentPortion: 1,\r\n    isLoading: false,\r\n    packId: '',\r\n    searchParams: {\r\n        cardAnswer: '',\r\n        cardQuestion: '',\r\n    },\r\n    sortMin: 0,\r\n    sortMax: 5,\r\n};\r\n\r\nexport const cardsReducer = (state: CardsStateType = initState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        case SET_MIN_MAX_GRADE:\r\n            return {...state, sortMin: action.min, sortMax: action.max};\r\n        case GET_CARDS:\r\n            return {\r\n                ...state,\r\n                fromCardsServer: {\r\n                    ...state.fromCardsServer,\r\n                    cards: action.payload.cards,\r\n                    cardsTotalCount: action.payload.cardsTotalCount\r\n                },\r\n            }\r\n        case PACK_ID:\r\n            return {...state, packId: action.packId};\r\n        case SET_SHOW_CARDS_BY:\r\n            return {...state, fromCardsServer: {...state.fromCardsServer, pageCount: action.pageCount}};\r\n        case CHANGE_CARDS_PORTION:\r\n            return {...state, currentPortion: action.flag ? state.currentPortion + 1 : state.currentPortion - 1};\r\n        case SET_CARDS_PORTION:\r\n            return {...state, currentPortion: action.portion};\r\n        case SET_CURRENT_CARDS_PAGE:\r\n            return {...state, fromCardsServer: {...state.fromCardsServer, page: action.page}};\r\n        case SET_CARDS_SORT_PARAM:\r\n            return {...state, sortParam: action.sortParam};\r\n        case SORT_CARDS:\r\n            return {...state, sortBy: !state.sortBy};\r\n        case SEARCH_CARDS:\r\n            return {...state, searchParams: {...state.searchParams, cardAnswer: action.cardAnswer, cardQuestion: action.cardQuestion}};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const getCardsTC = (): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>, getState: () => AppRootStateType) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        const state = getState();\r\n\r\n        const paramObject = {\r\n            page: state.cardsReducer.fromCardsServer.page,\r\n            pageCount: state.cardsReducer.fromCardsServer.pageCount,\r\n            sortCards: state.cardsReducer.sortParam,\r\n            cardsPack_id: state.cardsReducer.packId,\r\n            max: state.cardsReducer.sortMax,\r\n            min: state.cardsReducer.sortMin,\r\n            cardAnswer: state.cardsReducer.searchParams.cardAnswer,\r\n            cardQuestion: state.cardsReducer.searchParams.cardQuestion,\r\n        }\r\n\r\n        const res = await cardsApi.getCards(paramObject);\r\n        dispatch(getCardsAC(res));\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const createCardTC = (payload: CreateCardObject): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await cardsApi.createCard(payload);\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const editCardTC = (payload: EditCardObject): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await cardsApi.editCard(payload);\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const deleteCardTC = (id: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        await cardsApi.deleteCard(id);\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const changePageTC = (page: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(setCurrentPageAC(page));\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const showByTC = (pageCount: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(setShowByAC(pageCount));\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const changePortionTC = (flag: boolean): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        dispatch(changePortionAC(flag));\r\n    } catch (error) {\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const setPortionTC = (portion: number): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    try {\r\n        dispatch(setPortionAC(portion));\r\n    } catch (error) {\r\n        console.log(error.response.data.error);\r\n    }\r\n};\r\nexport const sortCardsTC = (sortCards: string): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(loadingAC(true));\r\n    try {\r\n        dispatch(sortCardsAC());\r\n        dispatch(setCardsSortParamAC(sortCards));\r\n        dispatch(getCardsTC());\r\n        dispatch(loadingAC(false));\r\n    } catch (error) {\r\n        dispatch(loadingAC(false));\r\n        console.log(error.response.data.error);\r\n    }\r\n};","import React from \"react\";\r\nimport s from \"./Card.module.scss\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {AuthStateType} from \"../../reducers/authReducers/loginReducer\";\r\n\r\ntype PropsType = {\r\n    question: string\r\n    answer: string\r\n    created: string\r\n    id: string\r\n    cardsPack_id: string\r\n    toggleEditCardPopUp: (id: string, args: Array<string>) => void\r\n    toggleDeleteCardPopUp: (id: string, cardsPack_id: string) => void\r\n    userId: string\r\n}\r\n\r\nexport const Card = (props: PropsType) => {\r\n\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {userProfile} = authState;\r\n\r\n    const {answer, created, question, toggleEditCardPopUp, id, cardsPack_id, toggleDeleteCardPopUp, userId} = props;\r\n\r\n    const deleteCard = () => {\r\n        toggleDeleteCardPopUp(id, cardsPack_id);\r\n    }\r\n    const editPackHandler = () => {\r\n        toggleEditCardPopUp(id, [question, answer]);\r\n    }\r\n\r\n    const disabledDeleteBtn = userId === userProfile._id ? `${s.card__btn} ${s.card__btn_del}` : `${s.card__btn} ${s.disabled}`;\r\n    const disabledEditBtn = userId === userProfile._id ? `${s.card__btn} ${s.card__btn_edit}` : `${s.card__btn} ${s.disabled}`;\r\n\r\n    return (\r\n        <div className={s.card}>\r\n            <div className={s.card__row}>\r\n                <div>{question}</div>\r\n                <div>{answer}</div>\r\n                <div>{created}</div>\r\n            </div>\r\n            <div className={s.card__interface}>\r\n                <button className={disabledEditBtn} onClick={editPackHandler}>Edit</button>\r\n                <button className={disabledDeleteBtn} onClick={deleteCard}>Delete</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {PropsWithChildren} from \"react\";\r\nimport s from './AddCard.module.scss';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../../utils/formFields/formFields\";\r\nimport {fieldRequired} from \"../../utils/formValidation/formValidation\";\r\nimport {createCardTC} from \"../../reducers/cardsReducer/cardsReducer\";\r\nimport {CreateCardObject} from \"../../api/cardsApi\";\r\n\r\ntype PropsType = {\r\n    toggleCreatePackPopUp: () => void\r\n    cardsPack_id: string\r\n}\r\n\r\nexport const AddCard = (props: PropsType) => {\r\n\r\n    const {toggleCreatePackPopUp, cardsPack_id} = props;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: CreateCardObject) => {\r\n        dispatch(createCardTC({cardsPack_id, question: formData.question, answer: formData.answer,}));\r\n        toggleCreatePackPopUp();\r\n    }\r\n\r\n    const onClose = () => {\r\n        toggleCreatePackPopUp()\r\n    }\r\n\r\n    return (\r\n        <div className={s.createCard}>\r\n            <div className={s.createCard__formWrap}>\r\n                <div className={s.close} onClick={onClose}></div>\r\n                <AddCardReduxForm onSubmit={onSubmit}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst AddCardForm: React.FC<InjectedFormProps<CreateCardObject>> = (props: PropsWithChildren<InjectedFormProps<CreateCardObject>>) => {\r\n\r\n    return (\r\n        <form className={s.createCard__form} onSubmit={props.handleSubmit}>\r\n            <div className={s.createCard__formGroup}>\r\n                <Field component={Input} type={'text'} name={'question'} placeholder={'question'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <div className={s.createCard__formGroup}>\r\n                <Field component={Input} type={'text'} name={'answer'} placeholder={'answer'}\r\n                       validate={[fieldRequired]}/>\r\n            </div>\r\n            <button>Create card</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst AddCardReduxForm = reduxForm<CreateCardObject>({\r\n    form: 'AddCardForm'\r\n})(AddCardForm);","import React, {PropsWithChildren} from \"react\";\r\nimport s from './EditCard.module.scss';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input, Textarea} from \"../../utils/formFields/formFields\";\r\nimport {EditCardObject} from \"../../api/cardsApi\";\r\nimport {editCardTC} from \"../../reducers/cardsReducer/cardsReducer\";\r\n\r\ntype PropsType = {\r\n    toggleEditCardPopUp: (_id: string, args: Array<string>) => void\r\n    id: string\r\n    cardsPack_id: string\r\n    question: string\r\n    answer: string\r\n}\r\n\r\nexport const EditCard = (props: PropsType) => {\r\n\r\n    const {toggleEditCardPopUp, id, answer, question} = props;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: EditCardObject) => {\r\n        dispatch(editCardTC({\r\n            _id: id,\r\n            question: formData.question,\r\n            answer: formData.answer,\r\n            comments: formData.comments,\r\n        }));\r\n        toggleEditCardPopUp('', []);\r\n    }\r\n\r\n    const onClose = () => {\r\n        toggleEditCardPopUp('', [])\r\n    }\r\n\r\n    return (\r\n        <div className={s.editCard}>\r\n            <div className={s.editCard__formWrap}>\r\n                <div className={s.close} onClick={onClose}></div>\r\n                <EditCardReduxForm onSubmit={onSubmit} initialValues={{question, answer}}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst EditCardForm: React.FC<InjectedFormProps<EditCardObject>> = (props: PropsWithChildren<InjectedFormProps<EditCardObject>>) => {\r\n\r\n    return (\r\n        <form className={s.editCard__form} onSubmit={props.handleSubmit}>\r\n            <div className={s.editCard__formGroup}>\r\n                <Field component={Input} type={'text'} name={'question'} placeholder={'change question'}/>\r\n            </div>\r\n            <div className={s.editCard__formGroup}>\r\n                <Field component={Input} type={'text'} name={'answer'} placeholder={'change answer'}/>\r\n            </div>\r\n            <div className={s.editCard__formGroup}>\r\n                <Field component={Textarea} type={'text'} name={'comments'} placeholder={'comment'}/>\r\n            </div>\r\n            <button>Save</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst EditCardReduxForm = reduxForm<EditCardObject>({\r\n    form: 'EditCardForm'\r\n})(EditCardForm);\r\n","import React from \"react\";\r\nimport './DeleteCard.styles.scss';\r\n\r\ntype PropsType = {\r\n    toggleDeleteCardPopUp: (id: string, cardsPack_id: string) => void\r\n    deleteCard: (id: string, cardsPack_id: string) => void\r\n    id: string\r\n    cardsPackId: string\r\n}\r\n\r\nexport const DeleteCard = (props: PropsType) => {\r\n\r\n    const {toggleDeleteCardPopUp, deleteCard, id, cardsPackId} = props;\r\n\r\n    const onClose = () => {\r\n        toggleDeleteCardPopUp('', '')\r\n    }\r\n\r\n    const onConfirm = () => {\r\n        deleteCard(id, cardsPackId);\r\n        toggleDeleteCardPopUp('', '');\r\n    }\r\n\r\n    return (\r\n        <div className={'deleteCard'}>\r\n            <div className={'deleteCard__wrap'}>\r\n                <div className={'close'} onClick={onClose}></div>\r\n                <div className={'deleteCard__wrap-title'}>Delete the card?</div>\r\n                <div className={'deleteCard__wrap-btns'}>\r\n                    <button onClick={onConfirm}>Yes</button>\r\n                    <button onClick={onClose}>No</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {useCallback, useEffect, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport s from './Cards.module.scss';\r\nimport {AppRootStateType} from \"../store/store\";\r\nimport {\r\n    CardsStateType,\r\n    changePageTC,\r\n    changePortionTC,\r\n    deleteCardTC,\r\n    getCardsTC,\r\n    packIdAC,\r\n    searchCardsAC,\r\n    setCurrentPageAC,\r\n    setPortionTC,\r\n    showByTC,\r\n    sortCardsTC\r\n} from \"../reducers/cardsReducer/cardsReducer\";\r\nimport {Search} from \"../utils/search/Search\";\r\nimport {Sorting} from \"../utils/sorting/Sorting\";\r\nimport {Card} from \"./card/Card\";\r\nimport {Pagination} from \"../utils/pagination/Pagination\";\r\nimport {PackStateType} from \"../reducers/packsReducer/packsReducer\";\r\nimport {AuthStateType} from \"../reducers/authReducers/loginReducer\";\r\nimport {AddCard} from \"./addCard/AddCard\";\r\nimport {PacksLoading} from \"../utils/loading/packsLoading/PacksLoading\";\r\nimport {EditCard} from \"./editCard/EditCard\";\r\nimport {reset} from \"redux-form\";\r\nimport {SearchObject} from \"../api/packsApi\";\r\nimport {DeleteCard} from \"./deleteCard/DeleteCard\";\r\n\r\ntype CardsPackIdType = {\r\n    cardsPack_id: string\r\n}\r\ntype PropsType = RouteComponentProps<CardsPackIdType>;\r\n\r\nconst CardsComponent = (props: PropsType) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {userProfile} = authState;\r\n\r\n    const cardsState = useSelector<AppRootStateType, CardsStateType>(state => state.cardsReducer);\r\n    const {fromCardsServer, currentPortion, isLoading, sortBy} = cardsState;\r\n\r\n    const packsState = useSelector<AppRootStateType, PackStateType>(state => state.packsReducer);\r\n\r\n    const {match} = props;\r\n\r\n    const cardsPack_id = match.params.cardsPack_id;\r\n\r\n    // create/edit/delete pop ups\r\n    const [createCardPopUp, setCreateCardPopUp] = useState(false);\r\n    const [editCardPopUp, setEditCardPopUp] = useState<Array<string>>([]);\r\n    const [deleteCardPopUp, setDeleteCardPopUp] = useState<Array<string>>([]);\r\n\r\n    const toggleCreateCardPopUp = useCallback(() => {\r\n        setCreateCardPopUp(prev => !prev);\r\n    }, []);\r\n    const toggleEditCardPopUp = useCallback((_id: string, args: Array<string>) => {\r\n        if (_id) {\r\n            setEditCardPopUp([_id, ...args]);\r\n        } else {\r\n            setEditCardPopUp([]);\r\n        }\r\n    }, []);\r\n    const toggleDeleteCardPopUp = useCallback((id: string, cardsPack_id: string) => {\r\n        if (id.length > 0) {\r\n            setDeleteCardPopUp([id, cardsPack_id]);\r\n        } else {\r\n            setDeleteCardPopUp([]);\r\n        }\r\n    }, []);\r\n    ///\r\n\r\n    // pagination\r\n    const onPageChange = useCallback((page: number) => {\r\n        dispatch(changePageTC(page))\r\n    }, [dispatch]);\r\n\r\n    const onShowByChange = useCallback((pageCount: number) => {\r\n        dispatch(showByTC(pageCount));\r\n    }, [dispatch]);\r\n\r\n    const onPortionChange = useCallback((flag: boolean) => {\r\n        flag ? dispatch(changePortionTC(true)) : dispatch(changePortionTC(false));\r\n    }, [dispatch]);\r\n\r\n    const setPortionChange = useCallback((portion: number) => {\r\n        dispatch(setPortionTC(portion));\r\n    }, [dispatch]);\r\n    ///\r\n\r\n    // sorting\r\n    const sortRegular = useCallback((sortDirection: string) => {\r\n        const sortUrl = sortBy ? `1${sortDirection}` : `0${sortDirection}`;\r\n        dispatch(sortCardsTC(sortUrl));\r\n    }, [dispatch, sortBy]);\r\n    ///\r\n\r\n    //search\r\n    const onSearchSubmit = (queryParam: SearchObject) => {\r\n        if (queryParam.cardAnswer) {\r\n            dispatch(searchCardsAC(queryParam.cardAnswer, ''));\r\n            dispatch(getCardsTC());\r\n            dispatch(reset('SearchForm'));\r\n        } else if (queryParam.cardQuestion) {\r\n            dispatch(searchCardsAC('', queryParam.cardQuestion));\r\n            dispatch(getCardsTC());\r\n            dispatch(reset('SearchForm'));\r\n        } else {\r\n            dispatch(searchCardsAC('', ''));\r\n            dispatch(getCardsTC());\r\n            dispatch(reset('SearchForm'));\r\n        }\r\n    }\r\n    ///\r\n\r\n    //delete card\r\n    const deleteCard = (id: string) => {\r\n        dispatch(deleteCardTC(id))\r\n    }\r\n    ///\r\n\r\n    useEffect(() => {\r\n        dispatch(packIdAC(cardsPack_id))\r\n        dispatch(getCardsTC())\r\n\r\n        return () => {\r\n            dispatch(setPortionTC(1))\r\n            dispatch(setCurrentPageAC(1))\r\n        }\r\n    }, [dispatch, cardsPack_id])\r\n\r\n    const sortArray = ['answer', 'question'];\r\n    const sortMap = sortArray.map((sort, idx) => <Sorting key={idx} sortDirection={sort} sortRegular={sortRegular}/>);\r\n\r\n    const checkIfPackIsYours = packsState.fromServer.cardPacks.filter(f => {\r\n        if (f._id === cardsPack_id && f.user_id === userProfile._id) {\r\n            return f\r\n        }\r\n    });\r\n\r\n    const cardsMap = fromCardsServer.cards.map(card => {\r\n        const {_id, question, answer, created, user_id} = card;\r\n        return (\r\n            <Card key={_id} question={question} answer={answer} created={created}\r\n                  toggleEditCardPopUp={toggleEditCardPopUp} id={_id}\r\n                  cardsPack_id={cardsPack_id} toggleDeleteCardPopUp={toggleDeleteCardPopUp} userId={user_id}/>\r\n        )\r\n    })\r\n\r\n    const isPackEmpty = cardsMap.length < 1 ? <div>There are no cards yet here.</div> : cardsMap;\r\n\r\n    return (\r\n        <div className={s.cards}>\r\n            <div className={'container'}>\r\n\r\n                <div className={s.cards__interface}>\r\n\r\n                    <button className={checkIfPackIsYours.length ? `${s.cards__btn}` : `${s.cards__btn} ${s.disabled}`}\r\n                            onClick={toggleCreateCardPopUp}>add new card\r\n                    </button>\r\n\r\n                    <Search searchBy={['cardQuestion', 'cardAnswer']} onSearchSubmit={onSearchSubmit}/>\r\n\r\n                    <div className={s.cards__sortBlock}>\r\n                        <div className={s.cards__sortTitle}>Sort by:</div>\r\n                        <div className={s.cards__sortBtns}>{sortMap}</div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className={s.cardsTable}>\r\n\r\n                    <div className={s.cardsTable__header}>\r\n                        <div>Card question</div>\r\n                        <div>Card answer</div>\r\n                        <div>Created</div>\r\n                    </div>\r\n\r\n                    {isLoading ? <PacksLoading/> : isPackEmpty}\r\n\r\n                </div>\r\n\r\n                <Pagination currentPage={fromCardsServer.page} itemsOnPage={fromCardsServer.pageCount}\r\n                            onPageChange={onPageChange}\r\n                            pagesInPortion={5} totalItems={fromCardsServer.cardsTotalCount}\r\n                            onShowByChange={onShowByChange} onPortionChange={onPortionChange}\r\n                            currentPortion={currentPortion} setPortionChange={setPortionChange}/>\r\n\r\n            </div>\r\n\r\n            {\r\n                createCardPopUp &&\r\n                <AddCard toggleCreatePackPopUp={toggleCreateCardPopUp} cardsPack_id={cardsPack_id}/>\r\n            }\r\n            {\r\n                editCardPopUp[0] &&\r\n                <EditCard toggleEditCardPopUp={toggleEditCardPopUp} id={editCardPopUp[0]} question={editCardPopUp[1]}\r\n                          answer={editCardPopUp[2]} cardsPack_id={cardsPack_id}/>\r\n            }\r\n            {\r\n                deleteCardPopUp.length > 0 &&\r\n                <DeleteCard toggleDeleteCardPopUp={toggleDeleteCardPopUp} deleteCard={deleteCard}\r\n                            id={deleteCardPopUp[0]} cardsPackId={deleteCardPopUp[1]}/>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Cards = withRouter(CardsComponent);","import React from \"react\";\r\nimport s from './NotFound.module.scss';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport const NotFound = () => {\r\n    return (\r\n        <div className={s.notFound}>\r\n            <div  className={s.notFound__title}>404</div>\r\n            <div className={s.notFound__text}>page not found</div>\r\n            <Link  className={s.notFound__link} to={'/login'}>To login page.</Link>\r\n        </div>\r\n    )\r\n}","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://neko-back.herokuapp.com/2.0/',\r\n    withCredentials: true,\r\n});\r\nexport type GradeParamType = {\r\n    grade: number\r\n    card_id: string\r\n}\r\nexport const learnApi = {\r\n    grade(gradeParam: GradeParamType) {\r\n        return instance\r\n            .put(`cards/grade`, {\r\n                ...gradeParam\r\n            })\r\n            .then(res => {\r\n                return res.data;\r\n            })\r\n    }\r\n}","import {GradeParamType, learnApi} from \"../../api/learnApi\";\r\nimport {getCardsTC} from \"../cardsReducer/cardsReducer\";\r\nimport {AppRootStateType} from \"../../store/store\";\r\nimport {ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\n\r\nconst GRADE_LOADING = 'GRADE_LOADING';\r\n\r\ntype GradeLoadingACType = {\r\n    type: typeof GRADE_LOADING\r\n    isLoading: boolean\r\n}\r\nconst gradeLoadingAC = (isLoading: boolean): GradeLoadingACType => {\r\n    return {\r\n        type: GRADE_LOADING,\r\n        isLoading,\r\n    }\r\n}\r\n\r\ntype ActionTypes = GradeLoadingACType;\r\n\r\nexport type GradeStateType = {\r\n    isLoading: boolean\r\n}\r\n\r\nconst initialState: GradeStateType = {\r\n    isLoading: false\r\n}\r\n\r\nexport const gradeReducer = (state: GradeStateType = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case GRADE_LOADING:\r\n            return {...state, isLoading: action.isLoading};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ThunkType = ThunkAction<void, AppRootStateType, {}, ActionTypes>;\r\nexport const learnTC = (gradeParam: GradeParamType): ThunkType => async (dispatch: ThunkDispatch<AppRootStateType, {}, ActionTypes>) => {\r\n    dispatch(gradeLoadingAC(true));\r\n    try {\r\n        await learnApi.grade(gradeParam);\r\n        dispatch(gradeLoadingAC(false));\r\n    } catch (error) {\r\n        console.log(error.response.data.error)\r\n    }\r\n}\r\n\r\n","import React, {useEffect, useState} from \"react\";\r\nimport './Learn.styles.scss';\r\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../store/store\";\r\nimport {CardsStateType, getCardsTC, packIdAC} from \"../reducers/cardsReducer/cardsReducer\";\r\nimport {GradeStateType, learnTC} from \"../reducers/learnReducer/learnReducer\";\r\n\r\ntype CardsPackIdType = {\r\n    cardsPack_id: string\r\n}\r\ntype PropsType = RouteComponentProps<CardsPackIdType>;\r\ntype CardDataType = {\r\n    _id: string\r\n    question: string\r\n    answer: string\r\n    grade: number\r\n}\r\n\r\nconst LearnComponent = (props: PropsType) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const gradeState = useSelector<AppRootStateType, GradeStateType>(state => state.gradeReducer);\r\n    const {isLoading} = gradeState;\r\n\r\n    const cardsState = useSelector<AppRootStateType, CardsStateType>(state => state.cardsReducer);\r\n    const {cards} = cardsState.fromCardsServer;\r\n\r\n    const {match} = props;\r\n\r\n    const cardsPack_id = match.params.cardsPack_id;\r\n\r\n    const cardsMap = cards.map(card => {\r\n        const {_id, question, answer} = card;\r\n        const grade: number = +card.grade.toFixed(1);\r\n        return (\r\n            {_id, question, answer, grade}\r\n        )\r\n    });\r\n\r\n    const foo = (arr: Array<CardDataType>) => {\r\n        const newArr: Array<CardDataType> = [];\r\n\r\n        arr.forEach(el => {\r\n            let entriesAmount = Math.pow((Math.ceil(6 - el.grade)), 2);\r\n            for (let i = 0; i < entriesAmount; i++) {\r\n                newArr.push(el);\r\n            }\r\n        });\r\n\r\n        const cardInx = Math.floor(Math.random() * (newArr.length));\r\n\r\n        return newArr[cardInx]\r\n    }\r\n\r\n    const [card, setCard] = useState<CardDataType>({_id: '', question: '', answer: '', grade: 0});\r\n    const [showAnswer, setShowAnswer] = useState(false);\r\n\r\n    const onClickNext = () => {\r\n        const nextCard = foo(cardsMap);\r\n        setShowAnswer(false);\r\n        setCard(nextCard);\r\n        dispatch(getCardsTC());\r\n    }\r\n\r\n    const gradeQuestion = (grade: number, card_id: string) => {\r\n        const gradeParam = {grade, card_id}\r\n        dispatch(learnTC(gradeParam));\r\n    }\r\n\r\n    const disableBtn = isLoading ? 'gradeBtn disabled' : 'gradeBtn';\r\n\r\n    useEffect(() => {\r\n        dispatch(packIdAC(cardsPack_id));\r\n        dispatch(getCardsTC());\r\n        setCard(foo(cardsMap));\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <div className={'learn'}>\r\n            <div className={'container'}>\r\n\r\n                <div className={'question'}>\r\n                    <div className={'question__title'}>Question:</div>\r\n                    <div className={'question__text'}>{card && card.question}</div>\r\n                    <div className={'question__grade'}>Current grade: {card && card.grade}</div>\r\n                    {!showAnswer && <button onClick={() => setShowAnswer(true)}>show answer</button>}\r\n                </div>\r\n\r\n\r\n                {\r\n                    showAnswer &&\r\n                    <div className={'answer'}>\r\n                        <div className={'answer__title'}>Answer:</div>\r\n                        <div className={'answer__text'}>{card && card.answer}</div>\r\n                        <div className={'answer__btnBlock'}>\r\n                            <button className={disableBtn} onClick={() => {gradeQuestion(1, card?._id)}}>wrong</button>\r\n                            <button className={disableBtn} onClick={() => {gradeQuestion(2, card?._id)}}>bad</button>\r\n                            <button className={disableBtn} onClick={() => {gradeQuestion(3, card?._id)}}>close</button>\r\n                            <button className={disableBtn} onClick={() => {gradeQuestion(4, card?._id)}}>almost</button>\r\n                            <button className={disableBtn} onClick={() => {gradeQuestion(5, card?._id)}}>correct</button>\r\n                        </div>\r\n                        <button className={`${disableBtn} nextBtn`} onClick={onClickNext}>next</button>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Learn = withRouter(LearnComponent);","import React, { useEffect } from \"react\";\r\nimport './App.css';\r\nimport {Login} from \"../auth/login/Login\";\r\nimport {Registration} from \"../auth/registration/Registration\";\r\nimport {Profile} from \"../auth/profile/Profile\";\r\nimport {RestorePassword} from '../auth/restorePassword/RestorePassword';\r\nimport {NewPasswordWithRouter} from \"../auth/newPassword/NewPassword\";\r\nimport {AppRootStateType} from \"../store/store\";\r\nimport {appInitializedTC, AppStateType} from \"./appReducer\";\r\nimport {AppInitLoading} from \"../utils/loading/appInitLoading/AppInitLoading\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport {Header} from \"../header/Header\";\r\nimport {AuthStateType} from \"../reducers/authReducers/loginReducer\";\r\nimport { Packs } from \"../packs/Packs\";\r\nimport { Cards } from \"../cards/Cards\";\r\nimport {NotFound} from \"../notFound/NotFound\";\r\nimport {Learn} from \"../learn/Learn\";\r\n\r\nexport const App = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const appState = useSelector<AppRootStateType, AppStateType>(state => state.appReducer);\r\n    const {isInit} = appState;\r\n\r\n    const authState = useSelector<AppRootStateType, AuthStateType>(state => state.authReducer);\r\n    const {isAuth} = authState;\r\n\r\n    useEffect(() => {\r\n        dispatch(appInitializedTC());\r\n    }, [dispatch]);\r\n\r\n    if (!isInit) {\r\n        return <AppInitLoading/>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            {isAuth && <Header/>}\r\n            <Switch>\r\n                <Route exact path={'/'} render={() => <Profile/>}/>\r\n                <Route exact path={'/packs'} render={() => <Packs/>}/>\r\n                <Route exact path={'/cards/:cardsPack_id'} render={() => <Cards/>}/>\r\n                <Route exact path={'/learn/:cardsPack_id'} render={() => <Learn/>}/>\r\n                <Route exact path={'/login'} render={() => <Login/>}/>\r\n                <Route exact path={'/restorePassword'} render={() => <RestorePassword/>}/>\r\n                <Route exact path={'/registration'} render={() => <Registration/>}/>\r\n                <Route exact path={'/set-new-password/:token'} render={() => <NewPasswordWithRouter/>}/>\r\n                <Route render={() => <NotFound/>}/>\r\n            </Switch>\r\n        </div>\r\n    );\r\n}\r\n","\r\nimport  thunkMiddleware from 'redux-thunk';\r\nimport {authReducer} from \"../reducers/authReducers/loginReducer\";\r\nimport {registrationReducer} from \"../reducers/authReducers/registrationReducer\";\r\nimport {restorePasswordReducer} from \"../reducers/authReducers/restorePasswordReducer\";\r\nimport {newPassword} from \"../reducers/authReducers/newPasswordReducer\";\r\nimport {appReducer} from \"../app/appReducer\";\r\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport {packsReducer} from \"../reducers/packsReducer/packsReducer\";\r\nimport {cardsReducer} from \"../reducers/cardsReducer/cardsReducer\";\r\nimport {gradeReducer} from \"../reducers/learnReducer/learnReducer\";\r\n\r\nconst rootReducers = combineReducers({\r\n    form: formReducer,\r\n    authReducer,\r\n    registrationReducer,\r\n    restorePasswordReducer,\r\n    newPassword,\r\n    appReducer,\r\n    packsReducer,\r\n    cardsReducer,\r\n    gradeReducer,\r\n});\r\n\r\nexport type AppRootStateType = ReturnType<typeof rootReducers>;\r\n\r\nexport const store = createStore(rootReducers, applyMiddleware(thunkMiddleware));","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport {App} from './app/App';\r\nimport {HashRouter} from \"react-router-dom\";\r\nimport {Provider} from \"react-redux\";\r\nimport { store } from './store/store';\r\n\r\nReactDOM.render(\r\n    <HashRouter basename={'/'}>\r\n        <Provider store={store}>\r\n            <App/>\r\n        </Provider>\r\n    </HashRouter>\r\n    ,\r\n    document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2Rf8R\",\"headerNav\":\"Header_headerNav__P5SEh\",\"headerNav__link\":\"Header_headerNav__link__1Fkd2\",\"active\":\"Header_active__Vqznj\",\"header__logout\":\"Header_header__logout__1tHIV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"packs\":\"Packs_packs__9mhdn\",\"packs__interface\":\"Packs_packs__interface__CGJR_\",\"active\":\"Packs_active__2g8Ui\",\"packs__btn\":\"Packs_packs__btn__3HveT\",\"packs__sortBlock\":\"Packs_packs__sortBlock__3eSf1\",\"packs__sortTitle\":\"Packs_packs__sortTitle__NMy8A\",\"packs__sortBtns\":\"Packs_packs__sortBtns__30Aqq\",\"packsTable__header\":\"Packs_packsTable__header__Q1RPt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editCard\":\"EditCard_editCard__260xI\",\"editCard__formWrap\":\"EditCard_editCard__formWrap__s4ssX\",\"editCardAnimation\":\"EditCard_editCardAnimation__H2vkj\",\"close\":\"EditCard_close__oRg3c\",\"editCard__form\":\"EditCard_editCard__form__1R3Fv\",\"editCard__formGroup\":\"EditCard_editCard__formGroup__2lQq2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rangeSlider\":\"RangeSlider_rangeSlider__3FswU\",\"rangeSlider__track\":\"RangeSlider_rangeSlider__track__2k02i\",\"rangeSlider__progress\":\"RangeSlider_rangeSlider__progress__3NBfF\",\"rangeSlider__thumb\":\"RangeSlider_rangeSlider__thumb__xisAb\",\"rangeSlider__thumbInner\":\"RangeSlider_rangeSlider__thumbInner__ZFoBA\",\"rangeSlider__thumbInnerIndex\":\"RangeSlider_rangeSlider__thumbInnerIndex__Nz2Ca\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createCard\":\"AddCard_createCard__2XLKN\",\"createCard__formWrap\":\"AddCard_createCard__formWrap__2gFc8\",\"createCardAnimation\":\"AddCard_createCardAnimation__2IpMH\",\"close\":\"AddCard_close__3OFvy\",\"createCard__form\":\"AddCard_createCard__form__19G7F\",\"createCard__formGroup\":\"AddCard_createCard__formGroup__2DCr5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createPack\":\"AddPack_createPack__D8I2N\",\"createPack__formWrap\":\"AddPack_createPack__formWrap__28sjk\",\"createPackAnimation\":\"AddPack_createPackAnimation__1DicS\",\"close\":\"AddPack_close__2Qr5p\",\"createPack__form\":\"AddPack_createPack__form__2NDJj\",\"createPack__formGroup\":\"AddPack_createPack__formGroup__1wH8o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editPack\":\"EditPack_editPack__HmmP9\",\"editPack__formWrap\":\"EditPack_editPack__formWrap__1y4yE\",\"editPackAnimation\":\"EditPack_editPackAnimation__2xT9w\",\"close\":\"EditPack_close__3j5jq\",\"editPack__form\":\"EditPack_editPack__form__2QJsX\",\"editPack__formGroup\":\"EditPack_editPack__formGroup__1-2jU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"NotFound_notFound__1IP9m\",\"notFound__title\":\"NotFound_notFound__title__28PDP\",\"notFound__text\":\"NotFound_notFound__text__3e82U\",\"notFound__link\":\"NotFound_notFound__link__p8rz5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authFormBlock\":\"authStyles_authFormBlock__1MkRR\",\"authFormWrap\":\"authStyles_authFormWrap__1h9Rs\",\"disabled\":\"authStyles_disabled__VEbpM\",\"authFormTitle\":\"authStyles_authFormTitle__2F_7D\",\"authForm\":\"authStyles_authForm__vz244\",\"authForm__formGroup\":\"authStyles_authForm__formGroup__1_Fyz\",\"authForm__checkboxGroup\":\"authStyles_authForm__checkboxGroup__3ln6U\",\"authForm__info\":\"authStyles_authForm__info__G0UFx\",\"authFormError\":\"authStyles_authFormError__3ogzL\",\"authErrorAnimation\":\"authStyles_authErrorAnimation__1Oqgf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formFieldError\":\"formField_formFieldError__1z52X\",\"checkboxGroup\":\"formField_checkboxGroup__2qKVs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restorePasswordPopUp\":\"RestorePassword_restorePasswordPopUp__UkIgP\",\"restorePasswordPopUp__content\":\"RestorePassword_restorePasswordPopUp__content__2Gp99\",\"restorePopUpAnimation\":\"RestorePassword_restorePopUpAnimation__3bPbn\",\"restorePasswordPopUp__info\":\"RestorePassword_restorePasswordPopUp__info__Yhn_e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sortCheck\":\"Sorting_sortCheck__3N_yI\",\"sortBtn\":\"Sorting_sortBtn__12Eqq\"};"],"sourceRoot":""}